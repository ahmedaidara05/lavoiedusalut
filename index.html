<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livre Numérique - Expérience de Lecture Immersive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #c5a233;
            --secondary: #8f94fb;
            --dark: #1a1a2e;
            --light: #dddee;
            --accent: #ff6b6b;
            --text: #000000;
            --card-bg: #ffffff;
            --transition: all 0.3s ease;
            --font-size: 18px;
            --line-height: 1.7;
            --font-family: 'Cormorant Garamond', 'Georgia', serif;
            --content-bg: #f8f4e9;
        }

        .dark-theme {
            --primary: #6c63ff;
            --secondary: #a5a8ff;
            --dark: #121212;
            --light: #1e1e1e;
            --accent: #ff8787;
            --text: #e0e0e0;
            --card-bg: #2d2d2d;
            --content-bg: #2d2d2d;
        }

        .sepia-theme {
            --primary: #8b5a2b;
            --secondary: #d2b48c;
            --dark: #3e2723;
            --light: #d2c9a3;
            --accent: #a0522d;
            --text: #000000;
            --card-bg: #f0e6d2;
            --content-bg: #f0e6d2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #d2c9a3;
            color: var(--text);
            min-height: 100vh;
            transition: var(--transition);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 0;
            margin: 0 auto;
        }

        header {
            background: #2e7d32;
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .header-btn {
            background: rgba(0, 0, 0, 0.7);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .header-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: scale(1.1);
        }

        .page {
            display: none;
            min-height: calc(100vh - 70px);
            padding: 20px;
            padding-bottom: 80px;
        }

        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .hero {
            text-align: center;
            padding: 40px 20px;
            color: white;
            background: var(--light);
            border-radius: 10px;
            margin: 10px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .book-cover {
            width: 200px;
            height: 280px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            margin: 0 auto 30px;
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            transform: rotate(3deg);
            transition: var(--transition);
        }

        .book-cover:hover {
            transform: rotate(0) scale(1.05);
        }

        .btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn i {
            margin-right: 8px;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .chapter-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chapter-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .chapter-title {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .reading-page {
            padding: 15px 40px 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: none;
            overflow-y: auto;
        }

        .reading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            z-index: 10;
        }

        .chapter-indicator {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .content-page {
            flex: 1;
        }

        .content {
            font-family: var(--font-family);
            line-height: var(--line-height);
            font-size: var(--font-size);
            color: var(--text);
            text-align: justify;
            position: relative;
            z-index: 1;
            transition: var(--transition);
            padding: 20px;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .content p {
            margin-bottom: 1.5em;
            text-indent: 1.5em;
        }

        .content p:first-of-type:first-letter {
            initial-letter: 2;
            font-size: 3.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-right: 0.1em;
            line-height: 0.8;
        }

        .content h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            font-size: calc(var(--font-size) * 1.2);
            margin: 1.5em 0 0.8em 0;
            color: var(--text);
            border-bottom: 1px solid #d9c89e;
            padding-bottom: 0.3em;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .reading-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            z-index: 10;
        }

        .nav-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 1px solid #d9c89e;
            padding: 10px 25px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            transition: var(--transition);
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .nav-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .prev-btn i {
            margin-right: 8px;
        }

        .next-btn i {
            margin-left: 8px;
        }

        .customization-panel {
            position: fixed;
            bottom: -350px;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-radius: 20px 20px 0 0;
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
            transition: var(--transition);
            z-index: 1000;
            height: 350px;
            overflow-y: auto;
        }

        .customization-panel.open {
            bottom: 0;
            display: block;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-panel {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-group {
            margin-bottom: 15px;
        }

        .option-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .theme-options {
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .theme-default {
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
        }

        .theme-dark {
            background: linear-gradient(135deg, #1a1a2e 0%, #4a4a4a 100%);
        }

        .theme-sepia {
            background: linear-gradient(135deg, #8b5a2b 0%, #d2b48c 100%);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .value-display {
            min-width: 40px;
            text-align: center;
            font-weight: 500;
        }

        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: #2e7d32;
            z-index: 1100;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
            padding-top: 60px;
        }

        .search-modal.active {
            display: flex;
        }

        .search-container {
            background: var(--card-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .search-header h3 {
            margin: 0;
            color: var(--text);
        }

        .close-search {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .search-input-container {
            display: flex;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
        }

        #searchInput {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px 0 0 25px;
            font-size: 1rem;
            outline: none;
        }

        #searchButton {
            padding: 0 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
        }

        .search-result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .result-chapter {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .result-text {
            color: var(--text);
            font-size: 0.9rem;
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--text);
            opacity: 0.7;
        }

        .highlight {
            background: yellow;
            color: black;
            padding: 0 2px;
            border-radius: 3px;
        }

        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .color-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .text-color.black { background-color: #000000; }
        .text-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .text-color.dark-blue { background-color: #1a365d; }
        .text-color.dark-brown { background-color: #5c4a3c; }
        .text-color.dark-green { background-color: #2d5016; }
        .text-color.dark-red { background-color: #7b341e; }
        .text-color.gray { background-color: #4a5568; }

        .bg-color.beige { background-color: #f8f4e9; }
        .bg-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .bg-color.light-gray { background-color: #e2e8f0; }
        .bg-color.light-blue { background-color: #ebf8ff; }
        .bg-color.light-yellow { background-color: #fffff0; }
        .bg-color.light-green { background-color: #f0fff4; }
        .bg-color.light-pink { background-color: #fff5f5; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 5s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .chapters-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .content {
                font-size: 1rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .reading-page {
                padding: 15px 20px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .book-cover {
                width: 150px;
                height: 210px;
            }
            
            .chapter-card {
                padding: 15px;
            }
            
            .chapter-number {
                font-size: 1.5rem;
            }
            
            .customization-panel {
                height: 380px;
            }
        }

        .favorite-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            color: #ccc;
            cursor: pointer;
            transition: var(--transition);
            z-index: 5;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        .favorite-icon.active {
            color: var(--accent);
        }

        .favorite-icon:hover {
            transform: scale(1.2);
            color: var(--accent);
        }
#readingPage.active {
    background: url('https://i.postimg.cc/DzTfTR3C/3.png') no-repeat center/cover fixed;
    padding: 15px 40px 20px;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow-y: auto;
}
        .no-favorites {
            text-align: center;
            padding: 40px;
            color: var(--text);
            opacity: 0.7;
            grid-column: 1 / -1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <span>La Voie du Salut</span>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="header-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </header>

        <div class="page active" id="homePage">
            <div class="hero">
                <div class="book-cover floating">
                    <span>VOYAGE</span>
                </div>
                <h1>Voyage aux confins de l'imaginaire</h1>
                <p>Découvrez une histoire captivante à travers 40 chapitres palpitants. Plongez dans un univers unique et laissez-vous emporter par la magie des mots.</p>
                <button class="btn" id="startReading">
                    <i class="fas fa-book"></i> Commencer la lecture
                </button>
            </div>
        </div>

        <div class="page" id="chaptersPage">
            <h2>Table des matières</h2>
            <div class="chapters-grid" id="chaptersGrid">
            </div>
        </div>

     <div class="page" id="readingPage">
            <div class="reading-header">
                <button class="header-btn" id="backToChapters">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="chapter-indicator">Chapitre 1</div>
                <button class="header-btn" id="openCustomization">
                    <i class="fas fa-sliders-h"></i>
                </button>
            </div>
            <div class="content-page">
                <div class="content" id="chapterContent">
                </div>
            </div>
            <div class="reading-controls">
                <button class="nav-btn prev-btn" id="prevChapter">
                    <i class="fas fa-chevron-left"></i> Précédent
                </button>
                <button class="nav-btn next-btn" id="nextChapter">
                    Suivant <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="customization-panel" id="customizationPanel">
            <div class="panel-header">
                <h3 class="panel-title">Personnalisation</h3>
                <button class="close-panel" id="closeCustomization">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="options-grid">
                <div class="option-group">
                    <label class="option-label">Taille du texte</label>
                    <div class="slider-container">
                        <input type="range" min="14" max="50" value="18" class="slider" id="fontSize">
                        <span class="value-display" id="fontSizeValue">18px</span>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Interligne</label>
                    <div class="slider-container">
                        <input type="range" min="1.4" max="2.4" step="0.1" value="1.8" class="slider" id="lineHeight">
                        <span class="value-display" id="lineHeightValue">1.8</span>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Police</label>
                    <select id="fontFamily" class="slider">
                        <option value="'Cormorant Garamond', 'Georgia', serif">Cormorant Garamond</option>
                        <option value="'Roboto Slab', serif">Roboto Slab</option>
                        <option value="'Poppins', sans-serif">Poppins</option>
                        <option value="'Georgia', serif">Georgia</option>
                        <option value="'Arial', sans-serif">Arial</option>
                    </select>
                </div>
                <div class="option-group">
                    <label class="option-label">Couleur du texte</label>
                    <div class="color-options">
                        <button class="color-btn text-color black active" data-color="#000000"></button>
                        <button class="color-btn text-color white" data-color="#ffffff"></button>
                        <button class="color-btn text-color dark-blue" data-color="#1a365d"></button>
                        <button class="color-btn text-color dark-brown" data-color="#5c4a3c"></button>
                        <button class="color-btn text-color dark-green" data-color="#2d5016"></button>
                        <button class="color-btn text-color dark-red" data-color="#7b341e"></button>
                        <button class="color-btn text-color gray" data-color="#4a5568"></button>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Couleur de fond</label>
                    <div class="color-options">
                        <button class="color-btn bg-color beige active" data-color="#f8f4e9"></button>
                        <button class="color-btn bg-color white" data-color="#ffffff"></button>
                        <button class="color-btn bg-color light-gray" data-color="#e2e8f0"></button>
                        <button class="color-btn bg-color light-blue" data-color="#ebf8ff"></button>
                        <button class="color-btn bg-color light-yellow" data-color="#fffff0"></button>
                        <button class="color-btn bg-color light-green" data-color="#f0fff4"></button>
                        <button class="color-btn bg-color light-pink" data-color="#fff5f5"></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="page" id="favoritesPage">
            <h2>Vos chapitres favoris</h2>
            <div class="chapters-grid" id="favoritesGrid">
                <div class="no-favorites">Aucun chapitre favori pour le moment</div>
            </div>
        </div>

        <div class="nav-bar">
            <a href="#" class="nav-item active" data-page="homePage">
                <i class="fas fa-home nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="chaptersPage">
                <i class="fas fa-list nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="readingPage">
                <i class="fas fa-book nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="favoritesPage">
                <i class="fas fa-bookmark nav-icon"></i>
            </a>
        </div>
    </div>

    <div class="search-modal" id="searchModal">
        <div class="search-container">
            <div class="search-header">
                <h3>Rechercher dans le livre</h3>
                <button class="close-search" id="closeSearch">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-input-container">
                <input type="text" id="searchInput" placeholder="Entrez votre recherche...">
                <button id="searchButton">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="search-results" id="searchResults">
                <div class="no-results">Aucune recherche effectuée</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const pages = document.querySelectorAll('.page');
            const navItems = document.querySelectorAll('.nav-item');
            const themeToggle = document.getElementById('themeToggle');
            const startReadingBtn = document.getElementById('startReading');
            const backToChaptersBtn = document.getElementById('backToChapters');
            const openCustomizationBtn = document.getElementById('openCustomization');
            const closeCustomizationBtn = document.getElementById('closeCustomization');
            const customizationPanel = document.getElementById('customizationPanel');
            const themeButtons = document.querySelectorAll('.theme-btn');
            const fontSizeSlider = document.getElementById('fontSize');
            const fontSizeValue = document.getElementById('fontSizeValue');
            const lineHeightSlider = document.getElementById('lineHeight');
            const lineHeightValue = document.getElementById('lineHeightValue');
            const fontFamilySelect = document.getElementById('fontFamily');
            const contentElement = document.getElementById('chapterContent');
            const chaptersGrid = document.getElementById('chaptersGrid');
            const prevChapterBtn = document.getElementById('prevChapter');
            const nextChapterBtn = document.getElementById('nextChapter');
            const chapterIndicator = document.querySelector('.chapter-indicator');
            const navBar = document.querySelector('.nav-bar');
            const searchBtn = document.getElementById('searchBtn');
            const searchModal = document.getElementById('searchModal');
            const closeSearchBtn = document.getElementById('closeSearch');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const searchResults = document.getElementById('searchResults');
            const textColorButtons = document.querySelectorAll('.text-color');
            const bgColorButtons = document.querySelectorAll('.bg-color');
            let currentChapter = 1;
            let customTextColor = null;
            let customBgColor = null;
            let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
            const totalChapters = 40;

            const chapterContents = [
                { chapter: 1, title: "Le commencement", text: "Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie. Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie. Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie. Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie. Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie. Kael, un jeune fermier, découvre un artefact mystérieux qui changera sa vie." },
                { chapter: 2, title: "La rencontre", text: "Kael rencontre Elara, une magicienne énigmatique." },
                { chapter: 3, title: "Le défi", text: "Un défi inattendu attend Kael dans la forêt ancienne." },
                { chapter: 4, title: "L'alliance", text: "Kael forme une alliance avec les habitants de la forêt." },
                { chapter: 5, title: "Le voyage", text: "Le voyage à travers les montagnes commence." },
                { chapter: 6, title: "L'obstacle", text: "Un obstacle majeur bloque le chemin de Kael." },
                { chapter: 7, title: "La révélation", text: "Kael découvre un secret sur son passé." },
                { chapter: 8, title: "La trahison", text: "Une trahison bouleverse la quête de Kael." },
                { chapter: 9, title: "La bataille", text: "Une bataille épique éclate contre les forces obscures." },
                { chapter: 10, title: "La victoire", text: "Kael triomphe, mais à quel prix ?" },
                { chapter: 11, title: "Le nouveau départ", text: "Un nouveau chapitre s'ouvre pour Kael." },
                { chapter: 12, title: "L'énigme", text: "Une énigme complexe défie Kael." },
                { chapter: 13, title: "Le secret", text: "Un secret ancien est révélé." },
                { chapter: 14, title: "La décision", text: "Kael doit faire un choix crucial." },
                { chapter: 15, title: "Le sacrifice", text: "Un sacrifice est nécessaire pour avancer." },
                { chapter: 16, title: "L'espoir", text: "L'espoir renaît dans le cœur de Kael." },
                { chapter: 17, title: "Le retour", text: "Kael retourne dans son village natal." },
                { chapter: 18, title: "La confrontation", text: "Une confrontation décisive a lieu." },
                { chapter: 19, title: "La rédemption", text: "Kael cherche la rédemption pour ses erreurs." },
                { chapter: 20, title: "La conclusion", text: "La quête atteint son apogée." },
                { chapter: 21, title: "L'éveil", text: "Kael s'éveille à une nouvelle réalité." },
                { chapter: 22, title: "La transformation", text: "Une transformation profonde affecte Kael." },
                { chapter: 23, title: "L'exploration", text: "Kael explore un territoire inconnu." },
                { chapter: 24, title: "La découverte", text: "Une découverte majeure change tout." },
                { chapter: 25, title: "L'épreuve", text: "Kael fait face à une épreuve redoutable." },
                { chapter: 26, title: "La séparation", text: "Kael doit se séparer de ses alliés." },
                { chapter: 27, title: "La réunion", text: "Une réunion émouvante a lieu." },
                { chapter: 28, title: "L'ascension", text: "Kael gravit les échelons du pouvoir." },
                { chapter: 29, title: "La chute", text: "Une chute dramatique menace Kael." },
                { chapter: 30, title: "La renaissance", text: "Kael renaît de ses cendres." },
                { chapter: 31, title: "L'illumination", text: "Kael atteint l'illumination spirituelle." },
                { chapter: 32, title: "La persévérance", text: "La persévérance de Kael est mise à l'épreuve." },
                { chapter: 33, title: "La résolution", text: "Kael trouve une résolution à ses conflits." },
                { chapter: 34, title: "L'héritage", text: "Kael découvre son véritable héritage." },
                { chapter: 35, title: "La prophétie", text: "Une prophétie guide Kael." },
                { chapter: 36, title: "L'accomplissement", text: "Kael accomplit son destin." },
                { chapter: 37, title: "Le mystère", text: "Un mystère entoure la quête de Kael." },
                { chapter: 38, title: "L'aventure", text: "Une nouvelle aventure commence." },
                { chapter: 39, title: "Le destin", text: "Kael fait face à son destin final." },
                { chapter: 40, title: "L'infini", text: "Kael explore l'infini des possibles." }
            ];

            for (let i = 1; i <= totalChapters; i++) {
                const chapterCard = document.createElement('div');
                chapterCard.className = 'chapter-card';
                chapterCard.innerHTML = `
                    <div class="chapter-number">${i}</div>
                    <div class="chapter-title">${getChapterTitle(i)}</div>
                    <div class="favorite-icon" id="favorite-${i}">
                        ${favorites.includes(i) ? '<i class="fas fa-bookmark"></i>' : '<i class="far fa-bookmark"></i>'}
                    </div>
                `;
                chapterCard.addEventListener('click', () => {
                    currentChapter = i;
                    updateChapterContent();
                    showPage('readingPage');
                });
                const favIcon = chapterCard.querySelector('.favorite-icon');
                favIcon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    toggleFavorite(i);
                });
                chaptersGrid.appendChild(chapterCard);
            }

            function showPage(pageId) {
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(pageId).classList.add('active');
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-page') === pageId) item.classList.add('active');
                });
            }

            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage(this.getAttribute('data-page'));
                });
            });

            startReadingBtn.addEventListener('click', () => showPage('chaptersPage'));
            backToChaptersBtn.addEventListener('click', () => showPage('chaptersPage'));

            function toggleCustomizationPanel() {
                customizationPanel.classList.toggle('open');
                navBar.style.opacity = customizationPanel.classList.contains('open') ? '0' : '1';
                navBar.style.pointerEvents = customizationPanel.classList.contains('open') ? 'none' : 'auto';
            }

            openCustomizationBtn.addEventListener('click', toggleCustomizationPanel);
            closeCustomizationBtn.addEventListener('click', toggleCustomizationPanel);

            document.addEventListener('click', (e) => {
                if (customizationPanel.classList.contains('open') && 
                    !customizationPanel.contains(e.target) && 
                    !openCustomizationBtn.contains(e.target)) {
                    toggleCustomizationPanel();
                }
            });

            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                customTextColor = null;
                customBgColor = null;
                textColorButtons.forEach(btn => btn.classList.remove('active'));
                bgColorButtons.forEach(btn => btn.classList.remove('active'));
                document.querySelector('.text-color.black').classList.add('active');
                document.querySelector('.bg-color.beige').classList.add('active');
                themeToggle.innerHTML = document.body.classList.contains('dark-theme') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            });

            themeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    document.body.classList.remove('dark-theme', 'sepia-theme');
                    const theme = button.getAttribute('data-theme');
                    if (theme !== 'default') document.body.classList.add(`${theme}-theme`);
                    customTextColor = null;
                    customBgColor = null;
                    textColorButtons.forEach(btn => btn.classList.remove('active'));
                    bgColorButtons.forEach(btn => btn.classList.remove('active'));
                    document.querySelector('.text-color.black').classList.add('active');
                    document.querySelector('.bg-color.beige').classList.add('active');
                    themeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    themeToggle.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                });
            });

            fontSizeSlider.addEventListener('input', () => {
                const size = fontSizeSlider.value;
                fontSizeValue.textContent = `${size}px`;
                document.documentElement.style.setProperty('--font-size', `${size}px`);
                contentElement.style.fontSize = `${size}px`;
            });

            lineHeightSlider.addEventListener('input', () => {
                const height = lineHeightSlider.value;
                lineHeightValue.textContent = height;
                document.documentElement.style.setProperty('--line-height', height);
            });

            fontFamilySelect.addEventListener('change', () => {
                document.documentElement.style.setProperty('--font-family', fontFamilySelect.value);
            });

            textColorButtons.forEach(button => {
                button.addEventListener('click', () => {
                    textColorButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    customTextColor = button.getAttribute('data-color');
                    document.documentElement.style.setProperty('--text', customTextColor);
                });
            });

            bgColorButtons.forEach(button => {
                button.addEventListener('click', () => {
                    bgColorButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    customBgColor = button.getAttribute('data-color');
                    document.documentElement.style.setProperty('--content-bg', customBgColor);
                    document.body.classList.remove('dark-theme', 'sepia-theme');
                    themeButtons.forEach(btn => btn.classList.remove('active'));
                });
            });

            function toggleFavorite(chapterNumber) {
                const index = favorites.indexOf(chapterNumber);
                if (index === -1) {
                    favorites.push(chapterNumber);
                    showNotification('Chapitre ajouté aux favoris');
                } else {
                    favorites.splice(index, 1);
                    showNotification('Chapitre retiré des favoris');
                }
                localStorage.setItem('favorites', JSON.stringify(favorites));
                updateFavoriteIcon(chapterNumber);
                updateFavoritesPage();
            }

            function updateFavoriteIcon(chapterNumber) {
                const heartIcon = document.getElementById(`favorite-${chapterNumber}`);
                if (heartIcon) {
                    heartIcon.classList.toggle('active', favorites.includes(chapterNumber));
                    heartIcon.innerHTML = favorites.includes(chapterNumber) ? '<i class="fas fa-bookmark"></i>' : '<i class="far fa-bookmark"></i>';
                }
            }

            function showNotification(message) {
                const toast = document.createElement('div');
                toast.textContent = message;
                toast.style.position = 'fixed';
                toast.style.bottom = '80px';
                toast.style.left = '50%';
                toast.style.transform = 'translateX(-50%)';
                toast.style.backgroundColor = 'var(--primary)';
                toast.style.color = 'white';
                toast.style.padding = '10px 20px';
                toast.style.borderRadius = '25px';
                toast.style.zIndex = '1000';
                toast.style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.2)';
                document.body.appendChild(toast);
                setTimeout(() => document.body.removeChild(toast), 3000);
            }

            function updateFavoritesPage() {
                const favoritesGrid = document.getElementById('favoritesGrid');
                if (favorites.length === 0) {
                    favoritesGrid.innerHTML = '<div class="no-favorites">Aucun chapitre favori pour le moment</div>';
                    return;
                }
                favoritesGrid.innerHTML = '';
                const sortedFavorites = [...favorites].sort((a, b) => a - b);
                sortedFavorites.forEach(chapterNumber => {
                    const chapterCard = document.createElement('div');
                    chapterCard.className = 'chapter-card';
                    chapterCard.innerHTML = `
                        <div class="chapter-number">${chapterNumber}</div>
                        <div class="chapter-title">${getChapterTitle(chapterNumber)}</div>
                        <div class="favorite-icon active" id="favorite-fav-${chapterNumber}">
                            <i class="fas fa-bookmark"></i>
                        </div>
                    `;
                    chapterCard.addEventListener('click', () => {
                        currentChapter = chapterNumber;
                        updateChapterContent();
                        showPage('readingPage');
                    });
                    const favIcon = chapterCard.querySelector('.favorite-icon');
                    favIcon.addEventListener('click', (e) => {
                        e.stopPropagation();
                        toggleFavorite(chapterNumber);
                    });
                    favoritesGrid.appendChild(chapterCard);
                });
            }

            function getChapterTitle(chapterNumber) {
                return chapterContents[chapterNumber - 1].title || `Chapitre ${chapterNumber}`;
            }

            prevChapterBtn.addEventListener('click', () => {
                if (currentChapter > 1) {
                    currentChapter--;
                    updateChapterContent();
                    contentElement.scrollTop = 0;
                }
            });

            nextChapterBtn.addEventListener('click', () => {
                if (currentChapter < totalChapters) {
                    currentChapter++;
                    updateChapterContent();
                    contentElement.scrollTop = 0;
                }
            });

            function updateChapterContent() {
                chapterIndicator.textContent = `Chapitre ${currentChapter}`;
                prevChapterBtn.disabled = currentChapter === 1;
                nextChapterBtn.disabled = currentChapter === totalChapters;
                const chapter = chapterContents[currentChapter - 1];
                contentElement.innerHTML = `
                    <h3>${chapter.title}</h3>
                    <p>${chapter.text}</p>
                `;
            }

            searchBtn.addEventListener('click', () => {
                searchModal.classList.add('active');
                searchInput.focus();
            });

            closeSearchBtn.addEventListener('click', () => {
                searchModal.classList.remove('active');
                searchInput.value = '';
                searchResults.innerHTML = '<div class="no-results">Aucune recherche effectuée</div>';
            });

            searchModal.addEventListener('click', (e) => {
                if (e.target === searchModal) {
                    searchModal.classList.remove('active');
                    searchInput.value = '';
                    searchResults.innerHTML = '<div class="no-results">Aucune recherche effectuée</div>';
                }
            });

            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });

            function performSearch() {
                const searchTerm = searchInput.value.trim();
                searchResults.innerHTML = '';
                if (searchTerm.length < 2) {
                    searchResults.innerHTML = '<div class="no-results">Veuillez entrer au moins 2 caractères</div>';
                    return;
                }
                const results = chapterContents.filter(chapter => 
                    chapter.text.toLowerCase().includes(searchTerm.toLowerCase()) || 
                    chapter.title.toLowerCase().includes(searchTerm.toLowerCase())
                );
                if (results.length === 0) {
                    searchResults.innerHTML = `<div class="no-results">Aucun résultat trouvé pour "${searchTerm}"</div>`;
                    return;
                }
                results.forEach(result => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'search-result-item';
                    resultElement.innerHTML = `
                        <div class="result-chapter">Chapitre ${result.chapter}: ${result.title}</div>
                        <div class="result-text">${highlightText(result.text, searchTerm)}</div>
                    `;
                    resultElement.addEventListener('click', () => {
                        currentChapter = result.chapter;
                        updateChapterContent();
                        showPage('readingPage');
                        searchModal.classList.remove('active');
                        searchInput.value = '';
                        highlightSearchTerm(searchTerm);
                    });
                    searchResults.appendChild(resultElement);
                });
            }

            function highlightText(text, term) {
                const regex = new RegExp(`(${term})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }

            function highlightSearchTerm(term) {
                const content = document.getElementById('chapterContent');
                const oldHighlights = content.querySelectorAll('.highlight');
                oldHighlights.forEach(el => {
                    const parent = el.parentNode;
                    parent.replaceChild(document.createTextNode(el.textContent), el);
                    parent.normalize();
                });
                if (term && term.length >= 2) {
                    const regex = new RegExp(`(${term})`, 'gi');
                    content.innerHTML = content.innerHTML.replace(regex, '<span class="highlight">$1</span>');
                    const firstHighlight = content.querySelector('.highlight');
                    if (firstHighlight) {
                        firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }

            updateChapterContent();
            updateFavoritesPage();
        });
    </script>
</body>
</html>
