<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livre Numérique - Expérience de Lecture Immersive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #c5a233;
            --secondary: #8f94fb;
            --dark: #1a1a2e;
            --light: #dddee;
            --accent: #ff6b6b;
            --text: #000000;
            --card-bg: #ffffff;
            --transition: all 0.3s ease;
            --font-size: 18px;
            --line-height: 1.7;
            --font-family: 'Cormorant Garamond', 'Georgia', serif;
            --content-bg: #f8f4e9;
        }

        .dark-theme {
            --primary: #6c63ff;
            --secondary: #a5a8ff;
            --dark: #121212;
            --light: #1e1e1e;
            --accent: #ff8787;
            --text: #e0e0e0;
            --card-bg: #2d2d2d;
            --content-bg: #2d2d2d;
        }

        .sepia-theme {
            --primary: #8b5a2b;
            --secondary: #d2b48c;
            --dark: #3e2723;
            --light: #d2c9a3;
            --accent: #a0522d;
            --text: #000000;
            --card-bg: #f0e6d2;
            --content-bg: #f0e6d2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #d2c9a3;
            color: var(--text);
            min-height: 100vh;
            transition: var(--transition);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 0;
            margin: 0 auto;
        }

        header {
            background: #2e7d32;
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

    .header-btn {
    background: rgba(255, 255, 255, 0.2) !important;
    color: rgba(255, 255, 255, 0.9) !important;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 50% !important; /* Forme ronde */
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.header-btn:hover {
    background: rgba(255, 255, 255, 0.3) !important;
    color: white !important;
    transform: scale(1.1);
}

        .page {
            display: none;
            min-height: calc(100vh - 70px);
            padding: 20px;
            padding-bottom: 80px;
        }

        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .hero {
            text-align: center;
            padding: 40px 20px;
            color: white;
            background: var(--light);
            border-radius: 10px;
            margin: 10px;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .book-cover {
            width: 200px;
            height: 280px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            margin: 0 auto 30px;
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            transform: rotate(3deg);
            transition: var(--transition);
        }

        .book-cover:hover {
            transform: rotate(0) scale(1.05);
        }

        .btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn i {
            margin-right: 8px;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .chapter-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chapter-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .chapter-title {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .reading-page {
            padding: 15px 40px 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            transition: none;
            overflow-y: auto;
        }

        .reading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            z-index: 10;
        }

        .chapter-indicator {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--text);
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .content-page {
            flex: 1;
        }

        .content {
            font-family: var(--font-family);
            line-height: var(--line-height);
            font-size: var(--font-size);
            color: var(--text);
            text-align: justify;
            position: relative;
            z-index: 1;
            transition: var(--transition);
            padding: 20px;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .content p {
            margin-bottom: 1.5em;
            text-indent: 1.5em;
        }

        .content p:first-of-type:first-letter {
            initial-letter: 2;
            font-size: 3.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-right: 0.1em;
            line-height: 0.8;
        }

        .content h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            font-size: calc(var(--font-size) * 1.2);
            margin: 1.5em 0 0.8em 0;
            color: var(--text);
            border-bottom: 1px solid #d9c89e;
            padding-bottom: 0.3em;.reading-header
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

  .reading-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 40px;       /* Plus d’espace au-dessus */
    margin-bottom: 50px;    /* Ajoute de l’espace sous les boutons */
    padding: 0 20px;        /* Espacement interne */
    background: transparent !important; /* Supprime tout fond */
    border: none;            /* Pas de cadre */
    box-shadow: none;        /* Pas d’ombre */
    z-index: 10;
}
.reading-controls .nav-btn {
    background: transparent;    /* Totalement transparent */
    border: none;              /* Supprime les bordures */
    color: var(--text);        /* Garde la couleur du texte de ton thème */
    font-size: 1rem;           /* Taille du texte */
    font-weight: 600;          /* Texte légèrement en gras */
    padding: 8px 14px;         /* Un peu d’espace pour cliquer confortablement */
    cursor: pointer;          /* Curseur main */
    transition: color 0.3s ease, transform 0.2s ease;
}
        .nav-btn {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 1px solid #d9c89e;
            padding: 10px 25px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-weight: 500;
            transition: var(--transition);
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .nav-btn:hover {
            background: rgba(0, 0, 0, 0.8);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .prev-btn i {
            margin-right: 8px;
        }

        .next-btn i {
            margin-left: 8px;
        }

        .customization-panel {
            position: fixed;
            bottom: -350px;
            left: 0;
            right: 0;
            background: var(--card-bg);
            border-radius: 20px 20px 0 0;
            padding: 20px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
            transition: var(--transition);
            z-index: 1000;
            height: 350px;
            overflow-y: auto;
        }

        .customization-panel.open {
            bottom: 0;
            display: block;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-panel {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-group {
            margin-bottom: 15px;
        }

        .option-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .theme-options {
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .theme-default {
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
        }

        .theme-dark {
            background: linear-gradient(135deg, #1a1a2e 0%, #4a4a4a 100%);
        }

        .theme-sepia {
            background: linear-gradient(135deg, #8b5a2b 0%, #d2b48c 100%);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .value-display {
            min-width: 40px;
            text-align: center;
            font-weight: 500;
        }

        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: #2e7d32;
            z-index: 1100;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
            padding-top: 60px;
        }

        .search-modal.active {
            display: flex;
        }

        .search-container {
            background: var(--card-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .search-header h3 {
            margin: 0;
            color: var(--text);
        }

        .close-search {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .search-input-container {
            display: flex;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
        }

        #searchInput {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px 0 0 25px;
            font-size: 1rem;
            outline: none;
        }

        #searchButton {
            padding: 0 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
        }

        .search-result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .result-chapter {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .result-text {
            color: var(--text);
            font-size: 0.9rem;
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--text);
            opacity: 0.7;
        }

        .highlight {
            background: yellow;
            color: black;
            padding: 0 2px;
            border-radius: 3px;
        }

        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .color-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .text-color.black { background-color: #000000; }
        .text-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .text-color.dark-blue { background-color: #1a365d; }
        .text-color.dark-brown { background-color: #5c4a3c; }
        .text-color.dark-green { background-color: #2d5016; }
        .text-color.dark-red { background-color: #7b341e; }
        .text-color.gray { background-color: #4a5568; }

        .bg-color.beige { background-color: #f8f4e9; }
        .bg-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .bg-color.light-gray { background-color: #e2e8f0; }
        .bg-color.light-blue { background-color: #ebf8ff; }
        .bg-color.light-yellow { background-color: #fffff0; }
        .bg-color.light-green { background-color: #f0fff4; }
        .bg-color.light-pink { background-color: #fff5f5; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 5s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .chapters-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .content {
                font-size: 1rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
            .reading-page {
                padding: 15px 20px;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .book-cover {
                width: 150px;
                height: 210px;
            }
            
            .chapter-card {
                padding: 15px;
            }
            
            .chapter-number {
                font-size: 1.5rem;
            }
            
            .customization-panel {
                height: 380px;
            }
        }

        .favorite-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            color: #ccc;
            cursor: pointer;
            transition: var(--transition);
            z-index: 5;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        .favorite-icon.active {
            color: var(--accent);
        }

        .favorite-icon:hover {
            transform: scale(1.2);
            color: var(--accent);
        }
#readingPage.active {
    background: var(--content-bg) no-repeat center/cover;
    padding: 15px 40px 20px;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow-y: auto;
}
      .content-container {
    background: transparent !important;
}
        .no-favorites {
            text-align: center;
            padding: 40px;
            color: var(--text);
            opacity: 0.7;
            grid-column: 1 / -1;
        }
      /* Fenêtre modale */
.customization-modal {
    display: none; /* Cachée par défaut */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
}

/* Contenu de la personnalisation */
.customization-content {
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    width: 320px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
}

/* Grille des images */
.background-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-top: 15px;
}

/* Style des images */
.bg-option {
    width: 100%;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.bg-option:hover {
    transform: scale(1.05);
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
}

/* Bouton fermer */
#closeCustomization {
    margin-top: 15px;
    background: #444;
    color: #fff;
    border: none;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s;
}

#closeCustomization:hover {
    background: #222;
}
#fontFamily {
    width: 100%; /* Prend toute la largeur disponible */
    padding: 8px;
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: var(--card-bg);
    color: var(--text);
    font-size: 1rem;
}
.language-selector {
    position: relative;
    width: 100%;
    margin-bottom: 15px;
}
      .language-selector select {
    width: 100%;
    padding: 12px 15px 12px 40px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: white;
    font-size: 16px;
    color: #333;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
}
.language-selector select:focus {
    outline: none;
    border-color: #2e7d32;
    box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
}

.language-selector i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #666;
    pointer-events: none;
}

.language-selector::after {
    content: "";
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid #666;
    pointer-events: none;
}

/* Pour agrandir les options dans le menu déroulant */
#fontFamily option {
    font-size: 1rem;
    padding: 8px;
}
      .options-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Augmentez la largeur minimale */
    gap: 15px;
}
      /* Styles pour la page profil */
.profile-content {
    padding: 20px;
    max-width: 500px;
    margin: 0 auto;
}

.profile-form {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text);
}

.form-group input {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text);
}

.profile-links {
    margin-top: 25px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.profile-links a {
    color: var(--primary);
    text-decoration: none;
    text-align: center;
    transition: var(--transition);
}

.profile-links a:hover {
    text-decoration: underline;
}
      /* Styles pour le lien de politique de confidentialité */
.privacy-link {
    margin-top: 20px;
    text-align: center;
}

.privacy-link a {
    color: rgba(255, 255, 255, 0.8);
    text-decoration: none;
    font-size: 0.9rem;
    transition: var(--transition);
}

.privacy-link a:hover {
    color: white;
    text-decoration: underline;
}

/* Styles pour la page de politique de confidentialité */
.privacy-content {
    padding: 20px;
    max-width: 800px;
    margin: 0 auto;
}

.privacy-text {
    background: var(--card-bg);
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    color: var(--text);
}

.privacy-text h3 {
    margin-top: 25px;
    margin-bottom: 10px;
    color: var(--primary);
    border-bottom: none;
    padding-bottom: 0;
}

.privacy-text p, .privacy-text ul {
    margin-bottom: 15px;
    line-height: 1.6;
}

.privacy-text ul {
    padding-left: 20px;
}

.privacy-text li {
    margin-bottom: 8px;
}
      /* Styles pour les options de couleur des barres */
.header-color.green { background-color: #2e7d32; }
.header-color.blue { background-color: #1976d2; }
.header-color.purple { background-color: #7b1fa2; }
.header-color.dark { background-color: #121212; }
.header-color.brown { background-color: #5d4037; }
.header-color.red { background-color: #d32f2f; }

.footer-color.green { background-color: #2e7d32; }
.footer-color.blue { background-color: #1976d2; }
.footer-color.purple { background-color: #7b1fa2; }
.footer-color.dark { background-color: #121212; }
.footer-color.brown { background-color: #5d4037; }
.footer-color.red { background-color: #d32f2f; }
      /* Styles pour les options de couleur de fond */
.app-bg-color.default { background-color: #d2c9a3; }
.app-bg-color.light-blue { background-color: #e3f2fd; }
.app-bg-color.light-green { background-color: #e8f5e9; }
.app-bg-color.light-pink { background-color: #fce4ec; }
.app-bg-color.light-beige { background-color: #f5f5dc; }
.app-bg-color.light-gray { background-color: #f5f5f5; }
.app-bg-color.dark { background-color: #1a1a1a; }

/* Assurez-vous que le fond s'applique à tout le body */
body {
    background-color: var(--app-bg-color, #d2c9a3);
    transition: background-color 0.3s ease;
}
      /* Styles pour les options de couleur de texte global */
.text-all-color.black { background-color: #000000; }
.text-all-color.white { background-color: #ffffff; border: 1px solid #ccc; }
.text-all-color.dark-blue { background-color: #1a365d; }
.text-all-color.dark-brown { background-color: #5c4a3c; }
.text-all-color.dark-green { background-color: #2d5016; }
.text-all-color.dark-red { background-color: #7b341e; }
.text-all-color.gray { background-color: #4a5568; }

/* Appliquer la couleur du texte à tous les éléments de base */
body {
    color: var(--global-text-color, #000000);
    transition: color 0.3s ease;
}

/* Assurez-vous que les titres et textes utilisent cette variable */
h1, h2, h3, h4, h5, h6, p, span, div, a, li {
    color: inherit;
}

/* Exceptions pour certains éléments qui pourraient avoir des couleurs spécifiques */
.header-btn, .nav-item {
    color: white !important; /* Garder le contraste avec les barres colorées */
}

/* Pour la page de lecture, utilisez aussi la couleur globale */
.reading-page, .content {
    color: var(--global-text-color, #000000);
}

/* Pour les autres pages */
.page:not(#readingPage) {
    color: var(--global-text-color, #000000);
}
      .logo-image {
    width: 40px;
    height: 40px;
    margin-right: 10px;
    border-radius: 50%;
    object-fit: cover;
}
      .book-image {
    width: 200px;
    height: 280px;
    margin: 0 auto 30px;
    border-radius: 10px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    transition: var(--transition);
    overflow: hidden;
}

.book-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.book-image:hover {
    transform: rotate(0) scale(1.05);
}
      #themeToggle {
    display: none;
}
.language-selector {
    display: flex;
    align-items: center;
    gap: 10px;
}
.language-selector i {
    font-size: 18px;
    color: var(--primary);
}
[lang="ar"] {
    direction: rtl;
    text-align: right;
}
.chapter-card[lang="ar"] {
    direction: rtl;
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
    <img src="https://i.postimg.cc/N0jQPBxc/logo-amdmec-1-pdf-4.png" alt="Logo" class="logo-image">
                <span>La Voie du Salut</span>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="header-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </header>

        <div class="page active" id="homePage">
            <div class="hero">
<div style="text-align: center;">
    <img src="https://i.postimg.cc/N0jQPBxc/logo-amdmec-1-pdf-4.png" 
         alt="Voyage" 
         style="width: 450px; max-width: 100%; height: auto; display: inline-block;">
</div>
                <h1>Voyage aux confins de l'imaginaire</h1>
                <p>Découvrez une histoire captivante à travers 40 chapitres palpitants. Plongez dans un univers unique et laissez-vous emporter par la magie des mots.</p>
                <button class="btn" id="startReading">
                    <i class="fas fa-book"></i> Commencer la lecture
                </button>
               <div class="privacy-link">
            <a href="#" id="privacyPolicyLink">Politique de confidentialité</a>
        </div>
            </div>
        </div>

        <div class="page" id="chaptersPage">
            <h2>Table des matières</h2>
            <div class="chapters-grid" id="chaptersGrid">
            </div>
        </div>
            <div class="content-container" id="contentContainer">

     <div class="page" id="readingPage">
            <div class="reading-header">
                <button class="header-btn" id="backToChapters">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="chapter-indicator">Chapitre 1</div>
                <button class="header-btn" id="openCustomization">
                    <i class="fas fa-sliders-h"></i>
                </button>
            </div>
            <div class="content-container" id="contentContainer">
        <div class="content" id="chapterContent">
            <p>Ton texte ici...</p>
        </div>
    </div>
            <div class="reading-controls">
                <button class="nav-btn prev-btn" id="prevChapter">
                    <i class="fas fa-chevron-left"></i> Précédent
                </button>
                <button class="nav-btn next-btn" id="nextChapter">
                    Suivant <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <div class="customization-panel" id="customizationPanel">
            <div class="panel-header">
                <h3 class="panel-title">Personnalisation</h3>
                <button class="close-panel" id="closeCustomization" style="background-color: transparent; border: none; cursor: pointer;">
    <i class="fas fa-times" style="color: black; font-size: 18px;"></i>
</button>

            </div>
          <div class="option-group">
    <label class="option-label">Langue</label>
    <div class="language-selector">
        <i class="fas fa-globe"></i>
        <select id="languageSelect" class="slider">
            <option value="fr">Français</option>
            <option value="en">Anglais</option>
            <option value="ar">Arabe</option>
        </select>
    </div>
</div>
            <div class="options-grid">
                <div class="option-group">
                    <label class="option-label">Taille du texte</label>
                    <div class="slider-container">
                        <input type="range" min="14" max="50" value="18" class="slider" id="fontSize">
                        <span class="value-display" id="fontSizeValue">18px</span>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Interligne</label>
                    <div class="slider-container">
                        <input type="range" min="1.4" max="2.4" step="0.1" value="1.8" class="slider" id="lineHeight">
                        <span class="value-display" id="lineHeightValue">1.8</span>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Police</label>
                    <select id="fontFamily" class="slider">
                        <option value="'Cormorant Garamond', 'Georgia', serif">Cormorant Garamond</option>
                        <option value="'Roboto Slab', serif">Roboto Slab</option>
                        <option value="'Poppins', sans-serif">Poppins</option>
                        <option value="'Georgia', serif">Georgia</option>
                        <option value="'Arial', sans-serif">Arial</option>
                    </select>
                </div>
                <div class="option-group">
                    <label class="option-label">Couleur du texte</label>
                    <div class="color-options">
                        <button class="color-btn text-color black active" data-color="#000000"></button>
                        <button class="color-btn text-color white" data-color="#ffffff"></button>
                        <button class="color-btn text-color dark-blue" data-color="#1a365d"></button>
                        <button class="color-btn text-color dark-brown" data-color="#5c4a3c"></button>
                        <button class="color-btn text-color dark-green" data-color="#2d5016"></button>
                        <button class="color-btn text-color dark-red" data-color="#7b341e"></button>
                        <button class="color-btn text-color gray" data-color="#4a5568"></button>
                    </div>
                </div>
                <div class="option-group">
                    <label class="option-label">Couleur de fond</label>
                    <div class="background-options">
      <img src="https://i.postimg.cc/DzTfTR3C/3.png" class="bg-option" data-bg="https://i.postimg.cc/DzTfTR3C/3.png" alt="Fond 1">
      <img src="https://i.postimg.cc/nrcYwdLr/4.png" class="bg-option" data-bg="https://i.postimg.cc/nrcYwdLr/4.png" alt="Fond 2">
      <img src="https://i.postimg.cc/j5CHrMfF/6.png" class="bg-option" data-bg="https://i.postimg.cc/j5CHrMfF/6.png" alt="Fond 3">
      <img src="https://i.postimg.cc/13N0TVyG/5.png" class="bg-option" data-bg="https://i.postimg.cc/13N0TVyG/5.png" alt="Fond 4">
    </div>
                </div>
            </div>
          <div class="option-group">
    <label class="option-label">Couleur de la barre supérieure</label>
    <div class="color-options">
        <button class="color-btn header-color green active" data-color="#2e7d32"></button>
        <button class="color-btn header-color blue" data-color="#1976d2"></button>
        <button class="color-btn header-color purple" data-color="#7b1fa2"></button>
        <button class="color-btn header-color dark" data-color="#121212"></button>
        <button class="color-btn header-color brown" data-color="#5d4037"></button>
        <button class="color-btn header-color red" data-color="#d32f2f"></button>
    </div>
</div>

<div class="option-group">
    <label class="option-label">Couleur de la barre inférieure</label>
    <div class="color-options">
        <button class="color-btn footer-color green active" data-color="#2e7d32"></button>
        <button class="color-btn footer-color blue" data-color="#1976d2"></button>
        <button class="color-btn footer-color purple" data-color="#7b1fa2"></button>
        <button class="color-btn footer-color dark" data-color="#121212"></button>
        <button class="color-btn footer-color brown" data-color="#5d4037"></button>
        <button class="color-btn footer-color red" data-color="#d32f2f"></button>
    </div>
</div>
          <div class="option-group">
    <label class="option-label">Couleur de fond de l'application</label>
    <div class="color-options">
        <button class="color-btn app-bg-color default active" data-color="#d2c9a3"></button>
        <button class="color-btn app-bg-color light-blue" data-color="#e3f2fd"></button>
        <button class="color-btn app-bg-color light-green" data-color="#e8f5e9"></button>
        <button class="color-btn app-bg-color light-pink" data-color="#fce4ec"></button>
        <button class="color-btn app-bg-color light-beige" data-color="#f5f5dc"></button>
        <button class="color-btn app-bg-color light-gray" data-color="#f5f5f5"></button>
        <button class="color-btn app-bg-color dark" data-color="#1a1a1a"></button>
    </div>
</div>
          <div class="option-group">
    <label class="option-label">Couleur du texte (toutes les pages)</label>
    <div class="color-options">
        <button class="color-btn text-all-color black active" data-color="#000000"></button>
        <button class="color-btn text-all-color white" data-color="#ffffff"></button>
        <button class="color-btn text-all-color dark-blue" data-color="#1a365d"></button>
        <button class="color-btn text-all-color dark-brown" data-color="#5c4a3c"></button>
        <button class="color-btn text-all-color dark-green" data-color="#2d5016"></button>
        <button class="color-btn text-all-color dark-red" data-color="#7b341e"></button>
        <button class="color-btn text-all-color gray" data-color="#4a5568"></button>
    </div>
</div>
        </div>

        <div class="page" id="favoritesPage">
            <h2>Vos chapitres favoris</h2>
            <div class="chapters-grid" id="favoritesGrid">
                <div class="no-favorites">Aucun chapitre favori pour le moment</div>
            </div>
        </div>
 <div class="page" id="privacyPolicyPage">
    <div class="reading-header">
        <button class="header-btn" id="backFromPrivacy">
            <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Politique de confidentialité</h2>
    </div>
    
    <div class="privacy-content">
        <div class="privacy-text">
            <h3>1. Introduction</h3>
            <p>Bienvenue dans notre politique de confidentialité. Nous accordons une grande importance à la protection de vos données personnelles.</p>
            
            <h3>2. Données collectées</h3>
            <p>Nous collectons les informations que vous nous fournissez directement lorsque vous :</p>
            <ul>
                <li>Créez un compte</li>
                <li>Modifiez votre profil</li>
                <li>Nous contactez</li>
            </ul>
            
            <h3>3. Utilisation des données</h3>
            <p>Vos données sont utilisées pour :</p>
            <ul>
                <li>Personnaliser votre expérience de lecture</li>
                <li>Vous permettre d'enregistrer vos préférences</li>
                <li>Sauvegarder vos marque-pages et favoris</li>
            </ul>
            
            <h3>4. Conservation des données</h3>
            <p>Nous conservons vos données aussi longtemps que nécessaire pour vous fournir nos services.</p>
            
            <h3>5. Vos droits</h3>
            <p>Vous avez le droit d'accéder, modifier ou supprimer vos données personnelles à tout moment.</p>
            
            <h3>6. Contact</h3>
            <p>Pour toute question concernant cette politique, contactez-nous à : privacy@exemple.com</p>
            
            <p>Dernière mise à jour : 01 janvier 2024</p>
        </div>
    </div>
</div>
        <div class="nav-bar">
            <a href="#" class="nav-item active" data-page="homePage">
                <i class="fas fa-home nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="chaptersPage">
                <i class="fas fa-list nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="readingPage">
                <i class="fas fa-book nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="favoritesPage">
                <i class="fas fa-bookmark nav-icon"></i>
            </a>
          
        </div>
    </div>

    <div class="search-modal" id="searchModal">
        <div class="search-container">
            <div class="search-header">
                <h3>Rechercher dans le livre</h3>
                <button class="close-search" id="closeSearch">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-input-container">
                <input type="text" id="searchInput" placeholder="Entrez votre recherche...">
                <button id="searchButton">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="search-results" id="searchResults">
                <div class="no-results">Aucune recherche effectuée</div>
            </div>
        </div>
    </div>

  <script>
document.addEventListener('DOMContentLoaded', function() {
    // Variables et constantes
    const pages = document.querySelectorAll('.page');
    const navItems = document.querySelectorAll('.nav-item');
    const themeToggle = document.getElementById('themeToggle');
    const startReadingBtn = document.getElementById('startReading');
    const backToChaptersBtn = document.getElementById('backToChapters');
    const openCustomizationBtn = document.getElementById('openCustomization');
    const closeCustomizationBtn = document.getElementById('closeCustomization');
    const customizationPanel = document.getElementById('customizationPanel');
    const fontSizeSlider = document.getElementById('fontSize');
    const fontSizeValue = document.getElementById('fontSizeValue');
    const lineHeightSlider = document.getElementById('lineHeight');
    const lineHeightValue = document.getElementById('lineHeightValue');
    const fontFamilySelect = document.getElementById('fontFamily');
    const contentElement = document.getElementById('chapterContent');
    const chaptersGrid = document.getElementById('chaptersGrid');
    const prevChapterBtn = document.getElementById('prevChapter');
    const nextChapterBtn = document.getElementById('nextChapter');
    const chapterIndicator = document.querySelector('.chapter-indicator');
    const navBar = document.querySelector('.nav-bar');
    const searchBtn = document.getElementById('searchBtn');
    const searchModal = document.getElementById('searchModal');
    const closeSearchBtn = document.getElementById('closeSearch');
    const searchInput = document.getElementById('searchInput');
    const searchButton = document.getElementById('searchButton');
    const searchResults = document.getElementById('searchResults');
    const textColorButtons = document.querySelectorAll('.text-color');
    const bgOptions = document.querySelectorAll('.bg-option');
    const privacyPolicyLink = document.getElementById('privacyPolicyLink');
    const backFromPrivacy = document.getElementById('backFromPrivacy');
    
    let currentChapter = 1;
    let currentLanguage = localStorage.getItem('language') || 'fr';
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    let headerColor = localStorage.getItem('headerColor') || '#2e7d32';
    let footerColor = localStorage.getItem('footerColor') || '#2e7d32';
    let appBgColor = localStorage.getItem('appBgColor') || '#d2c9a3';
    let globalTextColor = localStorage.getItem('globalTextColor') || '#000000';
    let customTextColor = null;
    let customBgColor = null;
    
    // Définir les contenus des chapitres
    const chapterContents = [
        {
            chapter: 1,
            title: { fr: "Préambule", en: "Preamble", ar: "المُقَدِّمَة" },
            text: {
                fr: "<span style=\"font-size: 25px;\"><b>Préambule</b></span><br>Loin de nous l’esprit de dénigrer, mais près de nous l’esprit d’éveiller. Ainsi donc, motivé par l’amour de la vérité et le respect que j’ai envers tous les non-musulmans, je m’adresse à vous (homme de Dieu, frère dans la foi), avec la sincère intention de ne me permettre, après avoir médité la parole de Dieu, de garder le minimum que j’ai acquis...",
                en: "<span style=\"font-size: 25px;\"><b>Preamble</b></span><br>Far from the spirit of denigration, but close to the spirit of awakening, I address you, man of God, brother in faith, motivated by the love of truth and respect for all non-Muslims, to share what I’ve gained after meditating on God’s word...",
                ar: "<span style=\"font-size: 25px;\"><b>المُقَدِّمَة</b></span><br>بَعِيدًا عَنْ رُوحِ التَّنَقُّصِ وَقَرِيبًا مِنْ رُوحِ الإِيقَاظِ، أُخَاطِبُكَ يَا رَجُلَ اللهِ، يَا أَخِي فِي الإِيمَانِ، بِدَافِعِ حُبِّ الحَقِيقَةِ وَالاحْتِرَامِ لِغَيْرِ المُسْلِمِينَ، لِأُشَارِكَ مَا حَصَلْتُ عَلَيْهِ بَعْدَ التَّأَمُّلِ فِي كَلِمَةِ اللهِ..."
            }
        },
        {
            chapter: 2,
            title: { fr: "Préface", en: "Preface", ar: "المقدمة" },
            text: {
                fr: "<span style=\"font-size: 25px;\"><b>Préface</b></span><br>Contenu de la préface en français...",
                en: "<span style=\"font-size: 25px;\"><b>Preface</b></span><br>Preface content in English...",
                ar: "<span style=\"font-size: 25px;\"><b>المقدمة</b></span><br>محتوى المقدمة بالعربية..."
            }
        }
        // Ajouter les autres chapitres ici
    ];
    
    const totalChapters = chapterContents.length;
    
  function init() {
        updateChaptersGrid();
        updateChapterContent();
        updateFavoritesPage();
        applySavedSettings();
        setupEventListeners();
        updateLanguage(); // Ajouter cet appel
    }
    
    // Appliquer les paramètres sauvegardés
    function applySavedSettings() {
        // Appliquer les couleurs
        applyHeaderColor(headerColor);
        applyFooterColor(footerColor);
        applyAppBgColor(appBgColor);
        applyGlobalTextColor(globalTextColor);
        
        // Mettre en surbrillance les couleurs sélectionnées
        highlightSelectedColors();
        highlightSelectedAppBgColor();
        highlightSelectedTextColor();
        
        // Appliquer la taille de police
        if (fontSizeSlider && fontSizeValue) {
            const savedFontSize = localStorage.getItem('fontSize');
            if (savedFontSize) {
                fontSizeSlider.value = savedFontSize;
                fontSizeValue.textContent = `${savedFontSize}px`;
                document.documentElement.style.setProperty('--font-size', `${savedFontSize}px`);
                if (contentElement) contentElement.style.fontSize = `${savedFontSize}px`;
            }
        }
        
        // Appliquer la hauteur de ligne
        if (lineHeightSlider && lineHeightValue) {
            const savedLineHeight = localStorage.getItem('lineHeight');
            if (savedLineHeight) {
                lineHeightSlider.value = savedLineHeight;
                lineHeightValue.textContent = savedLineHeight;
                document.documentElement.style.setProperty('--line-height', savedLineHeight);
            }
        }
        
         if (fontFamilySelect) {
            const savedFontFamily = localStorage.getItem('fontFamily');
            if (savedFontFamily) {
                fontFamilySelect.value = savedFontFamily;
                document.documentElement.style.setProperty('--font-family', savedFontFamily);
            }
        }
    }
    
    // Configuration des écouteurs d'événements
    function setupEventListeners() {
        // Navigation
        if (navItems && navItems.length) {
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage(this.getAttribute('data-page'));
                });
            });
        }
        
        if (startReadingBtn) {
            startReadingBtn.addEventListener('click', () => showPage('chaptersPage'));
        }
        
        if (backToChaptersBtn) {
            backToChaptersBtn.addEventListener('click', () => showPage('chaptersPage'));
        }
        
        // Personnalisation
        if (openCustomizationBtn) {
            openCustomizationBtn.addEventListener('click', toggleCustomizationPanel);
        }
        
        if (closeCustomizationBtn) {
            closeCustomizationBtn.addEventListener('click', toggleCustomizationPanel);
        }
        
        // Thème
        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }
        
        // Paramètres de texte
        if (fontSizeSlider) {
            fontSizeSlider.addEventListener('input', updateFontSize);
        }
        
        if (lineHeightSlider) {
            lineHeightSlider.addEventListener('input', updateLineHeight);
        }
        
        if (fontFamilySelect) {
            fontFamilySelect.addEventListener('change', updateFontFamily);
        }
        
        // Navigation des chapitres
        if (prevChapterBtn) {
            prevChapterBtn.addEventListener('click', goToPrevChapter);
        }
        
        if (nextChapterBtn) {
            nextChapterBtn.addEventListener('click', goToNextChapter);
        }
        
        // Recherche
        if (searchBtn) {
            searchBtn.addEventListener('click', openSearchModal);
        }
        
        if (closeSearchBtn) {
            closeSearchBtn.addEventListener('click', closeSearchModal);
        }
        
        if (searchButton) {
            searchButton.addEventListener('click', performSearch);
        }
        
        if (searchInput) {
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });
        }
        
        // Politique de confidentialité
        if (privacyPolicyLink) {
            privacyPolicyLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('privacyPolicyPage');
            });
        }
        
        if (backFromPrivacy) {
            backFromPrivacy.addEventListener('click', () => {
                showPage('homePage');
            });
        }
        
        // Fermer les modales en cliquant à l'extérieur
        document.addEventListener('click', (e) => {
            if (customizationPanel && customizationPanel.classList.contains('open') && 
                !customizationPanel.contains(e.target) && 
                !openCustomizationBtn.contains(e.target)) {
                toggleCustomizationPanel();
            }
            
            if (searchModal && searchModal.classList.contains('active') && e.target === searchModal) {
                closeSearchModal();
            }
        });
    }
    
    // Fonctions pour la navigation
    function showPage(pageId) {
        pages.forEach(page => page.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        
        navItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('data-page') === pageId) item.classList.add('active');
        });
    }
    
    // Fonctions pour la personnalisation
    function toggleCustomizationPanel() {
        if (!customizationPanel || !navBar) return;
        
        customizationPanel.classList.toggle('open');
        navBar.style.opacity = customizationPanel.classList.contains('open') ? '0' : '1';
        navBar.style.pointerEvents = customizationPanel.classList.contains('open') ? 'none' : 'auto';
    }
    
    function toggleTheme() {
        document.body.classList.toggle('dark-theme');
        customTextColor = null;
        customBgColor = null;
        
        if (textColorButtons && textColorButtons.length) {
            textColorButtons.forEach(btn => btn.classList.remove('active'));
        }
        
        if (bgOptions && bgOptions.length) {
            bgOptions.forEach(btn => btn.classList.remove('active'));
        }
        
        if (document.querySelector('.text-color.black')) {
            document.querySelector('.text-color.black').classList.add('active');
        }
        
        if (document.querySelector('.bg-color.beige')) {
            document.querySelector('.bg-color.beige').classList.add('active');
        }
        
        if (themeToggle) {
            themeToggle.innerHTML = document.body.classList.contains('dark-theme') ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
        }
    }
    
    function updateFontSize() {
        const size = fontSizeSlider.value;
        fontSizeValue.textContent = `${size}px`;
        document.documentElement.style.setProperty('--font-size', `${size}px`);
        if (contentElement) contentElement.style.fontSize = `${size}px`;
        localStorage.setItem('fontSize', size);
    }
    
    function updateLineHeight() {
        const height = lineHeightSlider.value;
        lineHeightValue.textContent = height;
        document.documentElement.style.setProperty('--line-height', height);
        localStorage.setItem('lineHeight', height);
    }
    
    function updateFontFamily() {
        document.documentElement.style.setProperty('--font-family', fontFamilySelect.value);
        localStorage.setItem('fontFamily', fontFamilySelect.value);
    }
    
    // Fonctions pour les couleurs
    function applyHeaderColor(color) {
        const header = document.querySelector('header');
        if (header) header.style.backgroundColor = color;
        headerColor = color;
        localStorage.setItem('headerColor', color);
    }
    
    function applyFooterColor(color) {
        if (navBar) navBar.style.backgroundColor = color;
        footerColor = color;
        localStorage.setItem('footerColor', color);
    }
    
    function applyAppBgColor(color) {
        document.documentElement.style.setProperty('--app-bg-color', color);
        appBgColor = color;
        localStorage.setItem('appBgColor', color);
    }
    
    function applyGlobalTextColor(color) {
        document.documentElement.style.setProperty('--global-text-color', color);
        globalTextColor = color;
        localStorage.setItem('globalTextColor', color);
    }
    
    function highlightSelectedColors() {
        // Supprimer la sélection actuelle
        document.querySelectorAll('.header-color, .footer-color').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Sélectionner les couleurs sauvegardées
        document.querySelectorAll('.header-color').forEach(btn => {
            if (btn.getAttribute('data-color') === headerColor) {
                btn.classList.add('active');
            }
        });
        
        document.querySelectorAll('.footer-color').forEach(btn => {
            if (btn.getAttribute('data-color') === footerColor) {
                btn.classList.add('active');
            }
        });
    }
    
    function highlightSelectedAppBgColor() {
        // Supprimer la sélection actuelle
        document.querySelectorAll('.app-bg-color').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Sélectionner la couleur sauvegardée
        document.querySelectorAll('.app-bg-color').forEach(btn => {
            if (btn.getAttribute('data-color') === appBgColor) {
                btn.classList.add('active');
            }
        });
    }
    // Ajouter cette fonction pour mettre à jour la langue
    function updateLanguage() {
        const languageSelect = document.getElementById('languageSelect');
        if (languageSelect) {
            languageSelect.value = currentLanguage;
            languageSelect.addEventListener('change', function() {
                currentLanguage = this.value;
                localStorage.setItem('language', currentLanguage);
                
                // Mettre à jour tous les éléments de l'interface
                updateChaptersGrid();
                updateChapterContent();
                updateFavoritesPage();
                
                // Mettre à jour la page de politique de confidentialité si nécessaire
                const privacyPage = document.getElementById('privacyPolicyPage');
                if (privacyPage) {
                    privacyPage.setAttribute('lang', currentLanguage);
                }
                
                showNotification(`Langue changée en ${getLanguageName(currentLanguage)}`);
            });
        }
    }
    function getLanguageName(code) {
        const languages = {
            'fr': 'Français',
            'en': 'English',
            'ar': 'العربية'
        };
        return languages[code] || code;
    }
    
    function highlightSelectedTextColor() {
        // Supprimer la sélection actuelle
        document.querySelectorAll('.text-all-color').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Sélectionner la couleur sauvegardée
        document.querySelectorAll('.text-all-color').forEach(btn => {
            if (btn.getAttribute('data-color') === globalTextColor) {
                btn.classList.add('active');
            }
        });
    }
    
    // Gestion des clics sur les options de couleur
    document.addEventListener('click', function(e) {
        // Couleur de la barre supérieure
        if (e.target.classList.contains('header-color')) {
            const color = e.target.getAttribute('data-color');
            applyHeaderColor(color);
            highlightSelectedColors();
        }
        
        // Couleur de la barre inférieure
        if (e.target.classList.contains('footer-color')) {
            const color = e.target.getAttribute('data-color');
            applyFooterColor(color);
            highlightSelectedColors();
        }
        
        // Couleur de fond de l'application
        if (e.target.classList.contains('app-bg-color')) {
            const color = e.target.getAttribute('data-color');
            applyAppBgColor(color);
            highlightSelectedAppBgColor();
        }
        
        // Couleur de texte globale
        if (e.target.classList.contains('text-all-color')) {
            const color = e.target.getAttribute('data-color');
            applyGlobalTextColor(color);
            highlightSelectedTextColor();
        }
    });
    
    // Fonctions pour les chapitres et favoris
    function updateChaptersGrid() {
        if (!chaptersGrid) return;
        
        chaptersGrid.innerHTML = '';
        
        chapterContents.forEach(chapter => {
            const chapterCard = document.createElement('div');
            chapterCard.className = 'chapter-card';
            chapterCard.setAttribute('lang', currentLanguage);
            chapterCard.innerHTML = `
                <div class="chapter-number">${chapter.chapter}</div>
                <div class="chapter-title">${chapter.title[currentLanguage] || 'Chapitre ' + chapter.chapter}</div>
                <div class="favorite-icon" id="favorite-${chapter.chapter}">
                    ${favorites.includes(chapter.chapter) ? '<i class="fas fa-bookmark"></i>' : '<i class="far fa-bookmark"></i>'}
                </div>
            `;
            
            chapterCard.addEventListener('click', () => {
                currentChapter = chapter.chapter;
                updateChapterContent();
                showPage('readingPage');
            });
            
            const favIcon = chapterCard.querySelector('.favorite-icon');
            favIcon.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleFavorite(chapter.chapter);
            });
            
            chaptersGrid.appendChild(chapterCard);
        });
    }
    
    function updateChapterContent() {
        const chapter = chapterContents.find(ch => ch.chapter === currentChapter);
        if (!chapter || !contentElement || !chapterIndicator) return;
        
        chapterIndicator.textContent = `Chapitre ${currentChapter}`;
        
        if (prevChapterBtn) prevChapterBtn.disabled = currentChapter === 1;
        if (nextChapterBtn) nextChapterBtn.disabled = currentChapter === chapterContents.length;
        
        contentElement.innerHTML = chapter.text[currentLanguage] || 'Contenu non disponible';
        contentElement.setAttribute('lang', currentLanguage);
    }
    
    function goToPrevChapter() {
        if (currentChapter > 1) {
            currentChapter--;
            updateChapterContent();
            if (contentElement) contentElement.scrollTop = 0;
        }
    }
    
    function goToNextChapter() {
        if (currentChapter < chapterContents.length) {
            currentChapter++;
            updateChapterContent();
            if (contentElement) contentElement.scrollTop = 0;
        }
    }
    
    function toggleFavorite(chapterNumber) {
        const index = favorites.indexOf(chapterNumber);
        if (index === -1) {
            favorites.push(chapterNumber);
            showNotification('Chapitre ajouté aux favoris');
        } else {
            favorites.splice(index, 1);
            showNotification('Chapitre retiré des favoris');
        }
        localStorage.setItem('favorites', JSON.stringify(favorites));
        updateFavoriteIcon(chapterNumber);
        updateFavoritesPage();
    }
    
    function updateFavoriteIcon(chapterNumber) {
        const heartIcon = document.getElementById(`favorite-${chapterNumber}`);
        if (heartIcon) {
            heartIcon.classList.toggle('active', favorites.includes(chapterNumber));
            heartIcon.innerHTML = favorites.includes(chapterNumber) ? '<i class="fas fa-bookmark"></i>' : '<i class="far fa-bookmark"></i>';
        }
    }
    
    function updateFavoritesPage() {
        const favoritesGrid = document.getElementById('favoritesGrid');
        if (!favoritesGrid) return;
        
        if (favorites.length === 0) {
            favoritesGrid.innerHTML = '<div class="no-favorites">Aucun chapitre favori pour le moment</div>';
            return;
        }
        
        favoritesGrid.innerHTML = '';
        const sortedFavorites = [...favorites].sort((a, b) => a - b);
        
        sortedFavorites.forEach(chapterNumber => {
            const chapter = chapterContents.find(ch => ch.chapter === chapterNumber);
            if (!chapter) return;
            
            const chapterCard = document.createElement('div');
            chapterCard.className = 'chapter-card';
            chapterCard.setAttribute('lang', currentLanguage);
            chapterCard.innerHTML = `
                <div class="chapter-number">${chapterNumber}</div>
                <div class="chapter-title">${chapter.title[currentLanguage] || 'Chapitre ' + chapterNumber}</div>
                <div class="favorite-icon active" id="favorite-fav-${chapterNumber}">
                    <i class="fas fa-bookmark"></i>
                </div>
            `;
            
            chapterCard.addEventListener('click', () => {
                currentChapter = chapterNumber;
                updateChapterContent();
                showPage('readingPage');
            });
            
            const favIcon = chapterCard.querySelector('.favorite-icon');
            favIcon.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleFavorite(chapterNumber);
            });
            
            favoritesGrid.appendChild(chapterCard);
        });
    }
    
    // Fonctions pour la recherche
    function openSearchModal() {
        if (!searchModal) return;
        searchModal.classList.add('active');
        if (searchInput) searchInput.focus();
    }
    
    function closeSearchModal() {
        if (!searchModal) return;
        searchModal.classList.remove('active');
        if (searchInput) searchInput.value = '';
        if (searchResults) searchResults.innerHTML = '<div class="no-results">Aucune recherche effectuée</div>';
    }
    
    function performSearch() {
        if (!searchInput || !searchResults) return;
        
        const searchTerm = searchInput.value.trim();
        searchResults.innerHTML = '';
        
        if (searchTerm.length < 2) {
            searchResults.innerHTML = '<div class="no-results">Veuillez entrer au moins 2 caractères</div>';
            return;
        }
        
        const results = chapterContents.filter(chapter => {
            const text = chapter.text[currentLanguage] || '';
            const title = chapter.title[currentLanguage] || '';
            return text.toLowerCase().includes(searchTerm.toLowerCase()) || 
                   title.toLowerCase().includes(searchTerm.toLowerCase());
        });
        
        if (results.length === 0) {
            searchResults.innerHTML = `<div class="no-results">Aucun résultat trouvé pour "${searchTerm}"</div>`;
            return;
        }
        
        results.forEach(result => {
            const resultElement = document.createElement('div');
            resultElement.className = 'search-result-item';
            resultElement.innerHTML = `
                <div class="result-chapter">Chapitre ${result.chapter}: ${result.title[currentLanguage]}</div>
                <div class="result-text">${highlightText(result.text[currentLanguage], searchTerm)}</div>
            `;
            
            resultElement.addEventListener('click', () => {
                currentChapter = result.chapter;
                updateChapterContent();
                showPage('readingPage');
                closeSearchModal();
                highlightSearchTerm(searchTerm);
            });
            
            searchResults.appendChild(resultElement);
        });
    }
    
    function highlightText(text, term) {
        if (!text) return '';
        const regex = new RegExp(`(${term})`, 'gi');
        return text.replace(regex, '<span class="highlight">$1</span>');
    }
    
    function highlightSearchTerm(term) {
        if (!contentElement || !term || term.length < 2) return;
        
        const oldHighlights = contentElement.querySelectorAll('.highlight');
        oldHighlights.forEach(el => {
            const parent = el.parentNode;
            parent.replaceChild(document.createTextNode(el.textContent), el);
            parent.normalize();
        });
        
        const regex = new RegExp(`(${term})`, 'gi');
        contentElement.innerHTML = contentElement.innerHTML.replace(regex, '<span class="highlight">$1</span>');
        
        const firstHighlight = contentElement.querySelector('.highlight');
        if (firstHighlight) {
            firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }
    
    // Fonction pour les notifications
    function showNotification(message) {
        const toast = document.createElement('div');
        toast.textContent = message;
        toast.style.position = 'fixed';
        toast.style.bottom = '80px';
        toast.style.left = '50%';
        toast.style.transform = 'translateX(-50%)';
        toast.style.backgroundColor = 'var(--primary)';
        toast.style.color = 'white';
        toast.style.padding = '10px 20px';
        toast.style.borderRadius = '25px';
        toast.style.zIndex = '1000';
        toast.style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.2)';
        document.body.appendChild(toast);
        
        setTimeout(() => {
            if (document.body.contains(toast)) {
                document.body.removeChild(toast);
            }
        }, 3000);
    }
    
    // Initialiser l'application
    init();
});
</script>
  <script>
const customizationBtn = document.getElementById("openCustomization");
const customizationModal = document.getElementById("customizationModal");
const closeCustomization = document.getElementById("closeCustomization");
const bgOptions = document.querySelectorAll(".bg-option");
const readingPage = document.getElementById("readingPage");

// Ouvrir la fenêtre
customizationBtn.addEventListener("click", () => {
    customizationModal.style.display = "flex";
});

// Fermer la fenêtre
closeCustomization.addEventListener("click", () => {
    customizationModal.style.display = "none";
});
    
bgOptions.forEach(option => {
    option.addEventListener("click", () => {
        const selectedBg = option.dataset.bg;
        
        // Appliquer l'image à toute la page de lecture
        readingPage.style.backgroundImage = `url('${selectedBg}')`;
        
        // Sauvegarde dans localStorage
        localStorage.setItem("readingBg", selectedBg);
        customizationModal.style.display = "none";
    });
});


document.addEventListener("DOMContentLoaded", () => {
    const savedBg = localStorage.getItem("readingBg");
    if (savedBg) {
        readingPage.style.backgroundImage = `url('${savedBg}')`;
    }
});
</script>

</body>
</html>
