<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Livre Numérique - Expérience de Lecture Immersive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Slab:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #c5a233;
            --secondary: #8f94fb;
            --dark: #1a1a2e;
            --light: #d2c9a3;
            --accent: #ff6b6b;
            --text: #000000;
            --card-bg: #ffffff;
            --transition: all 0.3s ease;
            --font-size: 18px;
            --line-height: 1.7;
            --font-family: 'Cormorant Garamond', 'Georgia', serif;
            --content-bg: #f8f4e9;
        }

        .dark-theme {
            --primary: #6c63ff;
            --secondary: #a5a8ff;
            --dark: #121212;
            --light: #1e1e1e;
            --accent: #ff8787;
            --text: #e0e0e0;
            --card-bg: #2d2d2d;
            --content-bg: #2d2d2d;
        }

        .sepia-theme {
            --primary: #8b5a2b;
            --secondary: #d2b48c;
            --dark: #3e2723;
            --light: #d2c9a3;
            --accent: #a0522d;
            --text: #000000;
            --card-bg: #f0e6d2;
            --content-bg: #f0e6d2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light);
            color: var(--text);
            min-height: 100vh;
            transition: var(--transition);
            padding: 0;
            margin: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 0;
            margin: 0 auto;
        }

        /* Header */
        header {
            background: #4CAF50;
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-right: 10px;
            color: var(--accent);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white !important;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Pages */
        .page {
            display: none;
            min-height: calc(100vh - 70px);
            padding: 20px;
            padding-bottom: 80px;
        }

        .active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

     .hero {
    text-align: center;
    padding: 40px 20px;
    color: white;
    /* SUPPRIMEZ cette ligne : */
    /* background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect fill-opacity="0.05" width="100" height="100" fill="%23000000"/></svg>'); */
    /* REMPLACEZ par : */
    background: var(--light); /* Utilise la couleur de fond principale */
    border-radius: 10px;
    margin: 10px;
}


        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
            text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2);
        }

        .hero p {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        .book-cover {
            width: 200px;
            height: 280px;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            margin: 0 auto 30px;
            border-radius: 10px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            transform: rotate(3deg);
            transition: var(--transition);
        }

        .book-cover:hover {
            transform: rotate(0) scale(1.05);
        }

        .btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .btn i {
            margin-right: 8px;
        }

        /* Chapters Page */
        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .chapter-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
        }

        .chapter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chapter-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .chapter-title {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Reading Page */
        .reading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chapter-indicator {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem !important;
            font-weight: 600;
            color: var(--text) !important;
            font-style: italic;
        }

        .content-container {
            background: var(--content-bg) !important;
            border-radius: 5px !important;
            padding: 40px !important;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15), 
                        inset 0 0 0 1px rgba(255, 255, 255, 0.8),
                        inset 0 0 20px rgba(0, 0, 0, 0.05) !important;
            margin-bottom: 30px !important;
            max-height: 60vh !important;
            overflow-y: auto !important;
            position: relative;
            border: 1px solid #d9c89e !important;
            transition: var(--transition);
        }

        .content-container:before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            opacity: 0.4;
            z-index: 0;
        }

   .content {
    font-family: var(--font-family) !important;
    line-height: var(--line-height) !important;
    font-size: var(--font-size) !important;
    color: var(--text) !important;
    text-align: justify !important;
    position: relative;
    z-index: 1;
    transition: var(--transition);
    padding: 20px 0;
    /* SUPPRIMEZ ces propriétés : */
    /* max-height: 70vh; */
    /* overflow-y: auto; */
    /* REMPLACEZ par : */
    flex: 1; /* Prend tout l'espace disponible */
    overflow-y: visible; /* Permet le défilement normal */
}

        .content p {
            margin-bottom: 1.5em !important;
            text-indent: 1.5em !important;
        }

        .content p:first-of-type:first-letter {
            initial-letter: 2;
            font-size: 3.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-right: 0.1em;
            line-height: 0.8;
        }

        .content h3 {
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            font-size: 1.8rem;
            margin: 1.5em 0 0.8em 0;
            color: var(--text);
            border-bottom: 1px solid #d9c89e;
            padding-bottom: 0.3em;
        }

       .reading-page {
    padding: 15px 40px 20px !important;
    display: flex;
    flex-direction: column;
    height: calc(100vh - 70px);
    background: var(--light); /* Ajoutez cette ligne */
    transition: background-color 0.3s ease; /* Transition fluide */
}

        .reading-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .nav-btn {
            background: transparent !important;
            color: var(--text) !important;
            border: 1px solid #d9c89e !important;
            padding: 10px 25px !important;
            font-family: 'Cormorant Garamond', serif !important;
            font-size: 1.1rem !important;
            font-weight: 500 !important;
            transition: var(--transition);
        }

        .nav-btn:hover {
            background: rgba(197, 162, 51, 0.1) !important;
            transform: translateY(-2px) !important;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn i {
            font-size: 1.2rem;
        }

        .prev-btn i {
            margin-right: 8px;
        }

        .next-btn i {
            margin-left: 8px;
        }

      .customization-panel {
    position: fixed;
    bottom: -350px; /* Caché en dehors de l'écran */
    left: 0;
    right: 0;
    background: var(--card-bg);
    border-radius: 20px 20px 0 0;
    padding: 20px;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.15);
    transition: var(--transition);
    z-index: 1000;
    height: 350px;
    overflow-y: auto;
    display: none; /* Ajoutez cette ligne pour le cacher complètement */
}

      .customization-panel.open {
    bottom: 0; /* Positionné tout en bas */
    display: block; /* Ajoutez cette ligne pour l'afficher quand ouvert */
}

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .close-panel {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-group {
            margin-bottom: 15px;
        }

        .option-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .theme-options {
            display: flex;
            gap: 10px;
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        .theme-default {
            background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);
        }

        .theme-dark {
            background: linear-gradient(135deg, #1a1a2e 0%, #4a4a4a 100%);
        }

        .theme-sepia {
            background: linear-gradient(135deg, #8b5a2b 0%, #d2b48c 100%);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }

        .value-display {
            min-width: 40px;
            text-align: center;
            font-weight: 500;
        }

        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: #4CAF50;
            z-index: 800;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 0.8rem;
            transition: var(--transition);
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        /* Search Modal */
        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
            padding-top: 60px;
        }

        .search-modal.active {
            display: flex;
        }

        .search-container {
            background: var(--card-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .search-header h3 {
            margin: 0;
            color: var(--text);
        }

        .close-search {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .search-input-container {
            display: flex;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
        }

        #searchInput {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 25px 0 0 25px;
            font-size: 1rem;
            outline: none;
        }

        #searchButton {
            padding: 0 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 0 25px 25px 0;
            cursor: pointer;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
        }

        .search-result-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-result-item:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .result-chapter {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .result-text {
            color: var(--text);
            font-size: 0.9rem;
        }

        .no-results {
            padding: 20px;
            text-align: center;
            color: var(--text);
            opacity: 0.7;
        }

        .highlight {
            background: yellow;
            color: black;
            padding: 0 2px;
            border-radius: 3px;
        }

        .color-options {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .color-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .color-btn.active {
            border-color: var(--accent);
            transform: scale(1.1);
        }

        /* Couleurs pour le texte */
        .text-color.black { background-color: #000000; }
        .text-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .text-color.dark-blue { background-color: #1a365d; }
        .text-color.dark-brown { background-color: #5c4a3c; }
        .text-color.dark-green { background-color: #2d5016; }
        .text-color.dark-red { background-color: #7b341e; }
        .text-color.gray { background-color: #4a5568; }

        /* Couleurs pour le fond */
        .bg-color.beige { background-color: #d2c9a3; }
        .bg-color.white { background-color: #ffffff; border: 1px solid #ccc; }
        .bg-color.light-gray { background-color: #e2e8f0; }
        .bg-color.light-blue { background-color: #ebf8ff; }
        .bg-color.light-yellow { background-color: #fffff0; }
        .bg-color.light-green { background-color: #f0fff4; }
        .bg-color.light-pink { background-color: #fff5f5; }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .floating {
            animation: float 5s ease-in-out infinite;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .chapters-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .content {
                font-size: 1rem;
            }
            
            .options-grid {
                grid-template-columns: 1fr;
            }
            
           .reading-page {
    padding: 15px 20px 70px !important; /* Ajustement du padding */
    display: flex;
    flex-direction: column;
    height: calc(100vh - 70px);
    background: var(--light);
    transition: background-color 0.3s ease;
    overflow: hidden; /* Empêche le double défilement */
}
            
            .content-container {
                padding: 20px !important;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .book-cover {
                width: 150px;
                height: 210px;
            }
            
            .chapter-card {
                padding: 15px;
            }
            
            .chapter-number {
                font-size: 1.5rem;
            }
            
            .content-container {
                padding: 15px !important;
            }
            
            .customization-panel {
                height: 380px;
            }
        }
      /* Style pour l'icône favoris */
.favorite-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.5rem;
    color: #ccc;
    cursor: pointer;
    transition: var(--transition);
    z-index: 5;
}

.favorite-icon.active {
    color: var(--accent);
}

.favorite-icon:hover {
    transform: scale(1.2);
}

/* Style pour la page des favoris */
.no-favorites {
    text-align: center;
    padding: 40px;
    color: var(--text);
    opacity: 0.7;
    grid-column: 1 / -1;
}
      /* Style pour les cartes de chapitre */
.chapter-card {
    background: var(--card-bg);
    border-radius: 15px;
    padding: 20px;
    text-align: center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    transition: var(--transition);
    cursor: pointer;
    position: relative; /* Ajoutez cette ligne */
}

/* Style pour l'icône favoris */
.favorite-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 1.2rem;
    color: #ccc;
    cursor: pointer;
    transition: var(--transition);
    z-index: 5;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
}

.favorite-icon.active {
    color: var(--accent);
}

.favorite-icon:hover {
    transform: scale(1.2);
    color: var(--accent);
}

/* Style pour l'icône favoris dans l'en-tête */
.chapter-indicator {
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.4rem !important;
    font-weight: 600;
    color: var(--text) !important;
    font-style: italic;
    display: flex;
    align-items: center;
    gap: 10px;
}

.header-favorite {
    font-size: 1.5rem;
    cursor: pointer;
    transition: var(--transition);
}

.header-favorite.active {
    color: var(--accent);
}

.header-favorite:hover {
    transform: scale(1.2);
}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <span>LivreNum</span>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="header-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </header>

        <!-- Home Page -->
        <div class="page active" id="homePage">
            <div class="hero">
                <div class="book-cover floating">
                    <span>VOYAGE</span>
                </div>
                <h1>Voyage aux confins de l'imaginaire</h1>
                <p>Découvrez une histoire captivante à travers 40 chapitres palpitants. Plongez dans un univers unique et laissez-vous emporter par la magie des mots.</p>
                <button class="btn" id="startReading">
                    <i class="fas fa-book"></i> Commencer la lecture
                </button>
            </div>
        </div>

        <!-- Chapters Page -->
        <div class="page" id="chaptersPage">
            <h2>Table des matières</h2>
            <div class="chapters-grid" id="chaptersGrid">
                <!-- Chapters will be generated by JavaScript -->
            </div>
        </div>

        <!-- Reading Page -->
       <div class="page" id="readingPage">
    <div class="reading-header">
        <button class="header-btn" id="backToChapters">
            <i class="fas fa-arrow-left"></i>
        </button>
        <div class="chapter-indicator">Chapitre 1</div>
        <button class="header-btn" id="openCustomization">
            <i class="fas fa-sliders-h"></i>
        </button>
    </div>
            
         <!-- SUPPRIMEZ le conteneur avec la classe content-container -->
    <div class="content" id="chapterContent">
        <h3>Le commencement</h3>
        <p>Il était une fois, dans un monde lointain, une aventure qui allait changer le cours de l'histoire. Le soleil se levait à peine sur les collines verdoyantes du royaume d'Eldoria, projetant de longues ombres qui dansaient au gré du vent.</p>
        
        <p>Notre héros, Kael, un jeune fermier au cœur pur, ignorait encore le destin extraordinaire qui l'attendait. Ce matin-là, alors qu'il cultivait ses terres, il découvrit un artefact étrange, brillant d'une lumière bleutée.</p>
        
        <p>Intrigué, il s'approcha prudemment. L'objet semblait fait d'un métal inconnu, avec des inscriptions complexes qui semblaient presque vivantes. Au moment où ses doigts effleurèrent la surface, une décharge d'énergie le traversa, et des visions de mondes lointains et de créatures mystiques envahirent son esprit.</p>
        
        <p>À cet instant, Kael comprit que sa vie ne serait plus jamais la même. Une quête venait de commencer, une quête qui le mènerait aux confins du connu, à la rencontre de peuples oubliés et de magie ancienne.</p>
    </div>
    
    <div class="reading-controls">
        <button class="nav-btn prev-btn" id="prevChapter">
            <i class="fas fa-chevron-left"></i> Précédent
        </button>
        <button class="nav-btn next-btn" id="nextChapter">
            Suivant <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

        <!-- Customization Panel -->
        <div class="customization-panel" id="customizationPanel">
            <div class="panel-header">
                <h3 class="panel-title">Personnalisation</h3>
                <button class="close-panel" id="closeCustomization">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="options-grid">
                <div class="option-group">
                    <label class="option-label">Thème</label>
                    <div class="theme-options">
                        <button class="theme-btn theme-default active" data-theme="default"></button>
                        <button class="theme-btn theme-dark" data-theme="dark"></button>
                        <button class="theme-btn theme-sepia" data-theme="sepia"></button>
                    </div>
                </div>
                
                <div class="option-group">
                    <label class="option-label">Taille du texte</label>
                    <div class="slider-container">
                        <input type="range" min="14" max="24" value="18" class="slider" id="fontSize">
                        <span class="value-display" id="fontSizeValue">18px</span>
                    </div>
                </div>
                
                <div class="option-group">
                    <label class="option-label">Interligne</label>
                    <div class="slider-container">
                        <input type="range" min="1.4" max="2.4" step="0.1" value="1.8" class="slider" id="lineHeight">
                        <span class="value-display" id="lineHeightValue">1.8</span>
                    </div>
                </div>
                
                <div class="option-group">
                    <label class="option-label">Police</label>
                    <select id="fontFamily" class="slider">
                        <option value="'Cormorant Garamond', 'Georgia', serif">Cormorant Garamond</option>
                        <option value="'Roboto Slab', serif">Roboto Slab</option>
                        <option value="'Poppins', sans-serif">Poppins</option>
                        <option value="'Georgia', serif">Georgia</option>
                        <option value="'Arial', sans-serif">Arial</option>
                    </select>
                </div>
                
                <div class="option-group">
                    <label class="option-label">Couleur du texte</label>
                    <div class="color-options">
                        <button class="color-btn text-color black active" data-color="#000000"></button>
                        <button class="color-btn text-color white" data-color="#ffffff"></button>
                        <button class="color-btn text-color dark-blue" data-color="#1a365d"></button>
                        <button class="color-btn text-color dark-brown" data-color="#5c4a3c"></button>
                        <button class="color-btn text-color dark-green" data-color="#2d5016"></button>
                        <button class="color-btn text-color dark-red" data-color="#7b341e"></button>
                        <button class="color-btn text-color gray" data-color="#4a5568"></button>
                    </div>
                </div>

                <div class="option-group">
                    <label class="option-label">Couleur de fond</label>
                    <div class="color-options">
                        <button class="color-btn bg-color beige active" data-color="#f8f4e9"></button>
                        <button class="color-btn bg-color white" data-color="#ffffff"></button>
                        <button class="color-btn bg-color light-gray" data-color="#e2e8f0"></button>
                        <button class="color-btn bg-color light-blue" data-color="#ebf8ff"></button>
                        <button class="color-btn bg-color light-yellow" data-color="#fffff0"></button>
                        <button class="color-btn bg-color light-green" data-color="#f0fff4"></button>
                        <button class="color-btn bg-color light-pink" data-color="#fff5f5"></button>
                    </div>
                </div>
            </div>
        </div>
<!-- Favorites Page -->
<div class="page" id="favoritesPage">
    <h2>Vos chapitres favoris</h2>
    <div class="chapters-grid" id="favoritesGrid">
        <!-- Les favoris seront générés par JavaScript -->
        <div class="no-favorites">Aucun chapitre favori pour le moment</div>
    </div>
</div>
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <a href="#" class="nav-item active" data-page="homePage">
                <i class="fas fa-home nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="chaptersPage">
                <i class="fas fa-list nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="readingPage">
                <i class="fas fa-book nav-icon"></i>
            </a>
            <a href="#" class="nav-item" data-page="favoritesPage">
        <i class="fas fa-bookmark nav-icon"></i>
    </a>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="search-modal" id="searchModal">
        <div class="search-container">
            <div class="search-header">
                <h3>Rechercher dans le livre</h3>
                <button class="close-search" id="closeSearch">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-input-container">
                <input type="text" id="searchInput" placeholder="Entrez votre recherche...">
                <button id="searchButton">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            <div class="search-results" id="searchResults">
                <div class="no-results">Aucune recherche effectuée</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const pages = document.querySelectorAll('.page');
            const navItems = document.querySelectorAll('.nav-item');
            const themeToggle = document.getElementById('themeToggle');
            const startReadingBtn = document.getElementById('startReading');
            const backToChaptersBtn = document.getElementById('backToChapters');
            const openCustomizationBtn = document.getElementById('openCustomization');
            const closeCustomizationBtn = document.getElementById('closeCustomization');
            const customizationPanel = document.getElementById('customizationPanel');
            const customizeNav = document.getElementById('customizeNav');
            const themeButtons = document.querySelectorAll('.theme-btn');
            const fontSizeSlider = document.getElementById('fontSize');
            const fontSizeValue = document.getElementById('fontSizeValue');
            const lineHeightSlider = document.getElementById('lineHeight');
            const lineHeightValue = document.getElementById('lineHeightValue');
            const fontFamilySelect = document.getElementById('fontFamily');
            const contentElement = document.getElementById('chapterContent');
            const contentContainer = document.querySelector('.content-container');
            const chaptersGrid = document.getElementById('chaptersGrid');
            const prevChapterBtn = document.getElementById('prevChapter');
            const nextChapterBtn = document.getElementById('nextChapter');
            const chapterIndicator = document.querySelector('.chapter-indicator');
            const navBar = document.querySelector('.nav-bar');
            const searchBtn = document.getElementById('searchBtn');
            const searchModal = document.getElementById('searchModal');
            const closeSearchBtn = document.getElementById('closeSearch');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const searchResults = document.getElementById('searchResults');
            
            // Text and background color buttons
            const textColorButtons = document.querySelectorAll('.text-color');
            const bgColorButtons = document.querySelectorAll('.bg-color');
            
            // Current chapter tracking
            let currentChapter = 1;
            let customTextColor = null;
            let customBgColor = null;
          let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

            const totalChapters = 40;
            
            // Generate chapters
         // Generate chapters
for (let i = 1; i <= totalChapters; i++) {
    const chapterCard = document.createElement('div');
    chapterCard.className = 'chapter-card';
    chapterCard.innerHTML = `
        <div class="chapter-number">${i}</div>
        <div class="chapter-title">${getChapterTitle(i)}</div>
        <div class="favorite-icon" id="favorite-${i}">
            ${favorites.includes(i) ? '<i class="fas fa-bookmark"></i>' : '<i class="fas fa-bookmark"></i>'}
        </div>
    `;
    
    chapterCard.addEventListener('click', () => {
        currentChapter = i;
        updateChapterContent();
        showPage('readingPage');
    });
    
    // Ajouter l'événement pour le cœur
    const favIcon = chapterCard.querySelector('.favorite-icon');
    favIcon.addEventListener('click', (e) => {
        e.stopPropagation(); // Empêcher le déclenchement du click sur la carte
        toggleFavorite(i);
    });
    
    chaptersGrid.appendChild(chapterCard);
}
            
            // Navigation functions
            function showPage(pageId) {
                pages.forEach(page => {
                    page.classList.remove('active');
                });
                document.getElementById(pageId).classList.add('active');
                
                navItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-page') === pageId) {
                        item.classList.add('active');
                    }
                });
            }
            
            // Event listeners for navigation
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });
            
            startReadingBtn.addEventListener('click', () => {
                showPage('chaptersPage');
            });
            
            backToChaptersBtn.addEventListener('click', () => {
                showPage('chaptersPage');
            });
            
            // Customization panel
            function toggleCustomizationPanel() {
                customizationPanel.classList.toggle('open');
                // Cacher la barre de navigation quand le panneau est ouvert
                if (customizationPanel.classList.contains('open')) {
                    navBar.style.opacity = '0';
                    navBar.style.pointerEvents = 'none';
                } else {
                    navBar.style.opacity = '1';
                    navBar.style.pointerEvents = 'auto';
                }
            }
            
            openCustomizationBtn.addEventListener('click', toggleCustomizationPanel);
            closeCustomizationBtn.addEventListener('click', toggleCustomizationPanel);
            customizeNav.addEventListener('click', function(e) {
                e.preventDefault();
                toggleCustomizationPanel();
            });
            
            // Close panel when clicking outside
            document.addEventListener('click', (e) => {
                if (customizationPanel.classList.contains('open') && 
                    !customizationPanel.contains(e.target) && 
                    !openCustomizationBtn.contains(e.target) && 
                    !customizeNav.contains(e.target)) {
                    toggleCustomizationPanel();
                }
            });
            
            // Theme switching
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-theme');
                
                // Reset custom colors when changing theme
                customTextColor = null;
                customBgColor = null;
                textColorButtons.forEach(btn => btn.classList.remove('active'));
                bgColorButtons.forEach(btn => btn.classList.remove('active'));
                document.querySelector('.text-color.black').classList.add('active');
                document.querySelector('.bg-color.beige').classList.add('active');
                
                if (document.body.classList.contains('dark-theme')) {
                    themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                } else {
                    themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                }
            });
            
            themeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove all theme classes
                    document.body.classList.remove('dark-theme', 'sepia-theme');
                    
                    // Add selected theme
                    const theme = button.getAttribute('data-theme');
                    if (theme !== 'default') {
                        document.body.classList.add(`${theme}-theme`);
                    }
                    
                    // Reset custom colors when changing theme
                    customTextColor = null;
                    customBgColor = null;
                    textColorButtons.forEach(btn => btn.classList.remove('active'));
                    bgColorButtons.forEach(btn => btn.classList.remove('active'));
                    document.querySelector('.text-color.black').classList.add('active');
                    document.querySelector('.bg-color.beige').classList.add('active');
                    
                    // Update active button
                    themeButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    
                    // Update theme toggle icon
                    if (theme === 'dark') {
                        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                    } else {
                        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                    }
                });
            });
            
            // Font size customization
            fontSizeSlider.addEventListener('input', () => {
                const size = fontSizeSlider.value;
                fontSizeValue.textContent = `${size}px`;
                document.documentElement.style.setProperty('--font-size', `${size}px`);
            });
            
            // Line height customization
            lineHeightSlider.addEventListener('input', () => {
                const height = lineHeightSlider.value;
                lineHeightValue.textContent = height;
                document.documentElement.style.setProperty('--line-height', height);
            });
            
            // Font family customization
            fontFamilySelect.addEventListener('change', () => {
                document.documentElement.style.setProperty('--font-family', fontFamilySelect.value);
            });
            
            // Text color customization
            textColorButtons.forEach(button => {
                button.addEventListener('click', () => {
                    textColorButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    customTextColor = button.getAttribute('data-color');
                    document.documentElement.style.setProperty('--text', customTextColor);
                });
            });
            
           // Background color customization
bgColorButtons.forEach(button => {
    button.addEventListener('click', () => {
        bgColorButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        customBgColor = button.getAttribute('data-color');
        
        // Appliquer la couleur de fond à la page de lecture, pas au contenu
        const readingPage = document.getElementById('readingPage');
        readingPage.style.backgroundColor = customBgColor;
        
        // Réinitialiser les thèmes prédéfinis
        document.body.classList.remove('dark-theme', 'sepia-theme');
        themeButtons.forEach(btn => btn.classList.remove('active'));
    });
});
            
            // Chapter navigation
            prevChapterBtn.addEventListener('click', () => {
                if (currentChapter > 1) {
                    currentChapter--;
                    updateChapterContent();
                }
            });
            
            nextChapterBtn.addEventListener('click', () => {
                if (currentChapter < totalChapters) {
                    currentChapter++;
                    updateChapterContent();
                }
            });
            // Ajoutez cette fonction pour gérer les favoris
// Au début de votre script, ajoutez:

// Ajoutez cette fonction pour gérer les favoris
function toggleFavorite(chapterNumber) {
    const index = favorites.indexOf(chapterNumber);
    
    if (index === -1) {
        // Ajouter aux favoris
        favorites.push(chapterNumber);
        showNotification('Chapitre ajouté aux favoris');
    } else {
        // Retirer des favoris
        favorites.splice(index, 1);
        showNotification('Chapitre retiré des favoris');
    }
    
    // Sauvegarder dans le localStorage
    localStorage.setItem('favorites', JSON.stringify(favorites));
    
    // Mettre à jour l'affichage
    updateFavoriteIcon(chapterNumber);
    updateFavoritesPage();
}

// Fonction pour mettre à jour l'icône favoris
function updateFavoriteIcon(chapterNumber) {
    const heartIcon = document.getElementById(`favorite-${chapterNumber}`);
    if (heartIcon) {
        if (favorites.includes(chapterNumber)) {
            heartIcon.classList.add('active');
            heartIcon.innerHTML = '<i class="fas fa-bookmark"></i>';
        } else {
            heartIcon.classList.remove('active');
            heartIcon.innerHTML = '<i class="fas fa-bookmark"></i>';
        }
    }
}

// Fonction pour afficher une notification
function showNotification(message) {
    // Créer une notification toast
    const toast = document.createElement('div');
    toast.textContent = message;
    toast.style.position = 'fixed';
    toast.style.bottom = '80px';
    toast.style.left = '50%';
    toast.style.transform = 'translateX(-50%)';
    toast.style.backgroundColor = 'var(--primary)';
    toast.style.color = 'white';
    toast.style.padding = '10px 20px';
    toast.style.borderRadius = '25px';
    toast.style.zIndex = '1000';
    toast.style.boxShadow = '0 3px 10px rgba(0, 0, 0, 0.2)';
    
    document.body.appendChild(toast);
    
    // Supprimer après 3 secondes
    setTimeout(() => {
        document.body.removeChild(toast);
    }, 3000);
}

// Fonction pour mettre à jour la page des favoris
function updateFavoritesPage() {
    const favoritesGrid = document.getElementById('favoritesGrid');
    
    if (favorites.length === 0) {
        favoritesGrid.innerHTML = '<div class="no-favorites">Aucun chapitre favori pour le moment</div>';
        return;
    }
    
    favoritesGrid.innerHTML = '';
    
    // Trier les favoris par ordre croissant
    const sortedFavorites = [...favorites].sort((a, b) => a - b);
    
    sortedFavorites.forEach(chapterNumber => {
        const chapterCard = document.createElement('div');
        chapterCard.className = 'chapter-card';
        chapterCard.innerHTML = `
            <div class="chapter-number">${chapterNumber}</div>
            <div class="chapter-title">${getChapterTitle(chapterNumber)}</div>
            <div class="favorite-icon active" id="favorite-fav-${chapterNumber}">
                <i class="fas fa-bookmark"></i>
            </div>
        `;
        
        chapterCard.addEventListener('click', () => {
            currentChapter = chapterNumber;
            updateChapterContent();
            showPage('readingPage');
        });
        
        // Ajouter l'événement pour le cœur des favoris
        const favIcon = chapterCard.querySelector('.favorite-icon');
        favIcon.addEventListener('click', (e) => {
            e.stopPropagation(); // Empêcher le déclenchement du click sur la carte
            toggleFavorite(chapterNumber);
        });
        
        favoritesGrid.appendChild(chapterCard);
    });
}
      function updateChapterContent() {
    chapterIndicator.textContent = `Chapitre ${currentChapter}`;
    
    // Update button states
    prevChapterBtn.disabled = currentChapter === 1;
    nextChapterBtn.disabled = currentChapter === totalChapters;
    
    // Ajouter l'icône favoris dans l'en-tête
    const isFavorite = favorites.includes(currentChapter);
   const heartIcon = isFavorite ? 
    '<i class="fas fa-bookmark" style="color: var(--accent); margin-left: 10px; cursor: pointer;" id="header-favorite"></i>' :
    '<i class="far fa-bookmark" style="margin-left: 10px; cursor: pointer;" id="header-favorite"></i>';
    
    chapterIndicator.innerHTML = `Chapitre ${currentChapter} ${heartIcon}`;
    
    // Ajouter l'événement au cœur de l'en-tête
    setTimeout(() => {
        const headerFavorite = document.getElementById('header-favorite');
        if (headerFavorite) {
            headerFavorite.addEventListener('click', () => {
                toggleFavorite(currentChapter);
                
                // Mettre à jour l'icône dans l'en-tête
                const isNowFavorite = favorites.includes(currentChapter);
headerFavorite.className = isNowFavorite ? 'fas fa-bookmark' : 'far fa-bookmark';                headerFavorite.style.color = isNowFavorite ? 'var(--accent)' : '';
            });
        }
    }, 0);
    
    // Update content
    contentElement.innerHTML = `
        <h3>${getChapterTitle(currentChapter)}</h3>
        <p>Il était une fois, dans un monde lointain, une aventure qui allait changer le cours de l'histoire. Le soleil se levait à peine sur les collines verdoyantes du royaume d'Eldoria, projetant de longues ombres qui dansaient au gré du vent.</p>
        <p>Notre héros, Kael, un jeune fermier au cœur pur, ignorait encore le destin extraordinaire qui l'attendait. Ce matin-là, alors qu'il cultivait ses terres, il découvrit un artefact étrange, brillant d'une lumière bleutée.</p>
        <p>Intrigué, il s'approcha prudemment. L'objet semblait fait d'un métal inconnu, avec des inscriptions complexes qui semblaient presque vivantes. Au moment où ses doigts effleurèrent la surface, une décharge d'énergie le traversa, et des visions de mondes lointains et de créatures mystiques envahirent son esprit.</p>
        <p>À cet instant, Kael comprit que sa vie ne serait plus jamais la même. Une quête venait de commencer, une quête qui le mènerait aux confins du connu, à la rencontre de peuples oubliés et de magie ancienne.</p>
    `;
}
            function getChapterTitle(chapterNumber) {
                const titles = [
                    "Le commencement", 
                    "La rencontre", 
                    "Le défi", 
                    "L'alliance", 
                    "Le voyage", 
                    "L'obstacle", 
                    "La révélation", 
                    "La trahison", 
                    "La bataille", 
                    "La victoire",
                    "Le nouveau départ",
                    "L'énigme",
                    "Le secret",
                    "La décision",
                    "Le sacrifice",
                    "L'espoir",
                    "Le retour",
                    "La confrontation",
                    "La rédemption",
                    "La conclusion",
                    "L'éveil",
                    "La transformation",
                    "L'exploration",
                    "La découverte",
                    "L'épreuve",
                    "La séparation",
                    "La réunion",
                    "L'ascension",
                    "La chute",
                    "La renaissance",
                    "L'illumination",
                    "La persévérance",
                    "La résolution",
                    "L'héritage",
                    "La prophétie",
                    "L'accomplissement",
                    "Le mystère",
                    "L'aventure",
                    "Le destin",
                    "L'infini"
                ];
                
                return titles[chapterNumber - 1] || `Chapitre ${chapterNumber}`;
            }
            
            // Search functionality
            searchBtn.addEventListener('click', () => {
                searchModal.classList.add('active');
                searchInput.focus();
            });
            
            closeSearchBtn.addEventListener('click', () => {
                searchModal.classList.remove('active');
                searchInput.value = '';
                searchResults.innerHTML = '<div class="no-results">Aucune recherche effectuée</div>';
            });
            
            searchModal.addEventListener('click', (e) => {
                if (e.target === searchModal) {
                    searchModal.classList.remove('active');
                    searchInput.value = '';
                    searchResults.innerHTML = '<div class="no-results">Aucune recherche effectuée</div>';
                }
            });
            
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
            
            function performSearch() {
                const searchTerm = searchInput.value.trim();
                
                searchResults.innerHTML = '';
                
                if (searchTerm.length < 2) {
                    searchResults.innerHTML = '<div class="no-results">Veuillez entrer au moins 2 caractères</div>';
                    return;
                }
                
                const results = simulateSearch(searchTerm);
                
                if (results.length === 0) {
                    searchResults.innerHTML = `<div class="no-results">Aucun résultat trouvé pour "${searchTerm}"</div>`;
                    return;
                }
                
                results.forEach(result => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'search-result-item';
                    resultElement.innerHTML = `
                        <div class="result-chapter">Chapitre ${result.chapter}: ${result.title}</div>
                        <div class="result-text">${highlightText(result.text, searchTerm)}</div>
                    `;
                    
                    resultElement.addEventListener('click', () => {
                        currentChapter = result.chapter;
                        updateChapterContent();
                        showPage('readingPage');
                        searchModal.classList.remove('active');
                        searchInput.value = '';
                        highlightSearchTerm(searchTerm);
                    });
                    
                    searchResults.appendChild(resultElement);
                });
            }
            
            function simulateSearch(term) {
                const allResults = [
                    { chapter: 1, title: "Le commencement", text: "Notre héros, Kael, un jeune fermier au cœur pur, ignorait encore le destin extraordinaire qui l'attendait." },
                    { chapter: 3, title: "Le défi", text: "Kael fit face à son premier défi, une créature mystérieuse qui gardait l'entrée de la forêt ancienne." },
                    { chapter: 5, title: "Le voyage", text: "Le voyage à travers les montagnes embrumées s'avéra plus difficile que prévu." },
                    { chapter: 7, title: "La révélation", text: "La révélation de son véritable héritage choqua Kael jusqu'au plus profond de son être." },
                    { chapter: 2, title: "La rencontre", text: "C'est lors de cette rencontre fortuite que Kael fit la connaissance d'Elara, la mystérieuse magicienne." },
                    { chapter: 4, title: "L'alliance", text: "L'alliance avec les habitants de la forêt fut cruciale pour la suite de leur quête." },
                    { chapter: 6, title: "L'obstacle", text: "L'obstacle semblait infranchissable, mais Kael ne perdit pas espoir." },
                    { chapter: 8, title: "La trahison", text: "La trahison vint de là où il s'y attendait le moins, le laissant abasourdi." }
                ];
                
                return allResults.filter(result => 
                    result.text.toLowerCase().includes(term.toLowerCase()) || 
                    result.title.toLowerCase().includes(term.toLowerCase())
                );
            }
            
            function highlightText(text, term) {
                const regex = new RegExp(`(${term})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }
            
            function highlightSearchTerm(term) {
                const content = document.getElementById('chapterContent');
                
                const oldHighlights = content.querySelectorAll('.highlight');
                oldHighlights.forEach(el => {
                    const parent = el.parentNode;
                    parent.replaceChild(document.createTextNode(el.textContent), el);
                    parent.normalize();
                });
                
                if (term && term.length >= 2) {
                    const regex = new RegExp(`(${term})`, 'gi');
                    content.innerHTML = content.innerHTML.replace(regex, '<span class="highlight">$1</span>');
                    
                    const firstHighlight = content.querySelector('.highlight');
                    if (firstHighlight) {
                        firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            }
            
            // Initialize chapter content
            updateChapterContent();
        });
    </script>
</body>
</html>
